---
title: é‡æ„æ•´ç†äºŒ(é¡¹ç›®è§„èŒƒ)
date: 2018-07-09
categories:
  - Other
tags: 
  - Other
---

::: tip
é¡¹ç›®é‡æ„æ•´ç†
:::

<!-- more-->

## åºŸè¯

æ­¤ç¯‡æ˜¯ 12530 æ¶æ„é‡æ„ç¬¬äºŒç¯‡, ä»¥ [é˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œ](https://github.com/alibaba/p3c/) ä¸ºåŸºç¡€, ç»“åˆè‡ªå·±å·¥ä½œç»éªŒ, ä½œä¸º `musicsearch-project` é‡æ„æ–¹æ¡ˆçš„åŸºç¡€éƒ¨åˆ†.
ä»¥æ­¤ä¸ºçº¦æŸ, å¸Œæœ›æ„å»ºä¸€ä¸ª`ç¨³å®š`, `æ˜“äºç»´æŠ¤`, `å¯æ‰©å±•` çš„é‡æ„æ–¹æ¡ˆ.

ä¸€ä¸ªé¡¹ç›®æœ€æ€•å¤šç§ç¼–ç é£æ ¼, å®ä½“åä¸€ä¼š entity, ä¸€ä¼š model, è®©ç»´æŠ¤çš„äººèº«å¿ƒç–²æƒ«, å› æ­¤åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ä¿æŒå”¯ä¸€ä¸€ç§ç¼–ç ä¹ æƒ¯, æœ‰åˆ©äºä»£ç ç»´æŠ¤(æ¯”å¦‚é€šè¿‡å‘½å, å°±çŸ¥é“ä½œç”¨ä»¥åŠæ‰€åœ¨çš„åŒ…å).

**è§åçŸ¥æ„, æ­¤ä¹ƒå‘½åçš„æœ€é«˜å¢ƒç•Œ(ä½“ä¼šä¸€ä¸‹ `å–å10åˆ†é’Ÿ, ç¼–ç 1åˆ†é’Ÿ` çš„å¢ƒç•Œ ğŸ˜‚).**

> ä»£ç è§„èŒƒçœ‹èµ·æ¥æ¯”è¾ƒæ¯ç‡¥, çœ‹å®Œä¸€éå¯èƒ½åªæœ‰ä¸€ç‚¹ç‚¹å°è±¡, å› æ­¤æˆ‘é‡‡ç”¨æ¯”è¾ƒé€—æ¯”çš„æ–¹å¼, å°½é‡è®©å¤§å®¶ä¸€éå°±è®°ä½.
> ä»£ç è§„èŒƒæ¯”è¾ƒåå‘ä¸ªäººä¸»ä¹‰, æ¯ä¸ªäººçš„ç¼–ç ä¹ æƒ¯éƒ½ä¸ä¸€æ ·, æ‰€ä»¥å¸Œæœ›å¤šæå‡ºè‡ªå·±çš„å»ºè®®, ä¸€èµ·æ”¹è¿›(æ²¡æœ‰æœ€å¥½çš„è§„èŒƒ, åªæœ‰æœ€åˆé€‚çš„. ğŸ™ƒ)

## Let's go

### å¼€ç¯‡

è¯è¯´ç›˜å¤å¼€å¤©è¾Ÿåœ°ä¹‹æ—¶... äºšå½“å’Œå¤å¨ƒè¯ç”Ÿæ··æ²Œä¹‹é—´, ä»–ä»¬ä»å°é’æ¢…ç«¹é©¬, ä¸€ä¸ªä¼šå”± 200 é¦–æ­Œ, ä¸€ä¸ªä¼šè·³ 200 æ”¯èˆ, åäººç§°ä»–ä»¬ä¸€ä¸ªä¸º äºŒç™¾æ­Œ, ä¸€ä¸ªä¸º äºŒç™¾èˆ ..... (ç”¨å¿ƒå»ä½“ä¼šğŸ˜‚)


### è¿™ä¸ªæ‰æ˜¯å¼€ç¯‡

æ±Ÿæ¹–å››åˆ†äº”è£‚, ä¸€äººä¸€æ±Ÿæ¹–...

ä½†æˆ‘ä»¬æ˜¯ä¸€ä¸ªå›¢é˜Ÿ, ä¸ºäº†ä¾¿äºç®¡ç†å’Œç»´æŠ¤, æ€¥éœ€ä¸€ä»½ä»£ç è§„èŒƒ, æ¥çº¦æŸæˆ‘ä»¬çš„ç¼–ç è§„åˆ™å’Œä¹ æƒ¯, å°±åƒä¿®ç‚¼ä¸€é—¨æ­¦æ—ç»å­¦, éœ€è¦ç§˜ç±çš„æŒ‡å¼•(è‘µèŠ±å®å…¸?). 

è¯·å„ä½è‹±é›„å¥½æ±‰ä»”ç»†é˜…è¯» ä¸¥æ ¼éµå®ˆ 
å¦‚æœ‰ä¸è¶³ä¹‹å¤„ å¸Œæœ›æå‡ºæ„è§ å…±å•†æ­¦æ—ç»Ÿä¸€éœ¸ä¸š

ä» 1000 ä¸ªå“ˆå§†é›·ç‰¹è½¬å˜ä¸ºåŒä¸€ä¸ª **æ—å¿—ç²**, ä»£ç é£æ ¼ä¿æŒç»Ÿä¸€æœ‰åˆ©äºæé«˜å·¥ä½œæ•ˆç‡, ä¾¿äºç®¡ç†.

æ¯”å¦‚:

1. ä¸€çœ‹åˆ°ä»¥ Controller ç»“å°¾çš„ç±», å°±åº”è¯¥çŸ¥é“è¿™ä¸ªæ˜¯æ¥å£, ç”¨äºå‚æ•°éªŒè¯, è°ƒç”¨ä¸šåŠ¡ç±»è¿›è¡Œå¤„ç†ä¸šåŠ¡é€»è¾‘, ç»„è£…ç»“æœ, è¿”å›æ•°æ®æˆ–è€…è·³è½¬é¡µé¢;
2. ä¸€çœ‹åˆ°ä»¥ Service ç»“å°¾çš„ç±», å°±çŸ¥é“è¿™ä¸ªæ˜¯ä¸šåŠ¡æ¥å£ç±», ç”¨äºå®šä¹‰ä¸šåŠ¡æ¥å£;
3. ä¸€çœ‹åˆ°ä»¥ Impl ç»“å°¾çš„ç±», å°±åº”è¯¥çŸ¥é“è¿™ä¸ªæ˜¯ä¸šåŠ¡å®ç°ç±», ç»„åˆä¸åŒçš„ Dao, å®ç°ä¸šåŠ¡é€»è¾‘;
4. ä¸€çœ‹åˆ°ä»¥ Dao ç»“å°¾çš„ç±», å°±åº”è¯¥çŸ¥é“è¿™ä¸ªæ˜¯ DB æ“ä½œç±», å¯¹æ•°æ®è¿›è¡Œ CRUD æ“ä½œ;
5. ä¸€çœ‹åˆ°ä»¥ Dto ç»“å°¾çš„ç±», å°±åº”è¯¥çŸ¥é“è¿™ä¸ªæ˜¯æ•°æ®ä¼ è¾“å¯¹è±¡, ç”¨äºå±•ç¤ºå±‚å’ŒæœåŠ¡å±‚ä¹‹é—´çš„æ•°æ®ä¼ è¾“;
6. ....

## çº¦å®š

ä¸ºäº†é¿å…æ­§ä¹‰, æ–‡æ¡£å¤§é‡ä½¿ç”¨ä»¥ä¸‹è¯æ±‡, è§£é‡Šå¦‚ä¸‹:

1. `å¿…é¡»` (must): ç»å¯¹, ä¸¥æ ¼éµå¾ª, è¯·ç…§åš, æ— æ¡ä»¶éµå®ˆï¼›
2. `ä¸€å®šä¸å¯` (must not): ç¦ä»¤, ä¸¥ä»¤ç¦æ­¢ï¼›
3. `åº”è¯¥` (should): å¼ºçƒˆå»ºè®®è¿™æ ·åš, ä½†æ˜¯ä¸å¼ºæ±‚ï¼›
4. `ä¸è¯¥` (should not): å¼ºçƒˆä¸å»ºè®®è¿™æ ·åš, ä½†æ˜¯ä¸å¼ºæ±‚ï¼›
5. `å¯ä»¥` (may) å’Œ å¯é€‰ (optional): é€‰æ‹©æ€§é«˜ä¸€ç‚¹, åœ¨è¿™ä¸ªæ–‡æ¡£å†…, æ­¤è¯è¯­ä½¿ç”¨è¾ƒå°‘ï¼›
6. `æ¨è` (recommend): ä¸ªäººæ¨èçš„åšæ³•, ä¸å¼ºæ±‚;

## å‡†å¤‡å·¥ä½œ 

> è¡Œèµ°æ±Ÿæ¹–, æ²¡æœ‰ä¸€ä»¶è¶æ‰‹çš„å…µå™¨æ€ä¹ˆèƒ½åœ¨æ±Ÿæ¹–ä¸­ç«‹è¶³, è¿˜åœ¨ç”¨ `eclipse` çš„å°‘ä¾ ä»¬, å¸Œæœ›å¼ƒæš—æŠ•æ˜, æ‹¥æŠ± Intellij IDEA, ä½ ä¼šå‘ç°ç¼–ç æ•ˆç‡æå‡ä¸æ˜¯**ç‚¹å·´ç‚¹å„¿**, è€Œæ˜¯**è¹­è¹­è¹­**çš„å¾€ä¸Šæ¶¨ ğŸ˜.

**æˆ‘ä¸æ˜¯å¯ŒäºŒä»£, æˆ‘æ²¡æœ‰èµ¢åœ¨äººç”Ÿçš„èµ·è·‘çº¿ä¸Š, ä½†æ˜¯æˆ‘ç”¨ Intellij IDEA, æˆ‘èµ¢åœ¨äº†å·¥ä½œçš„èµ·è·‘çº¿ä¸Š!**

æ¨èä¸€ä¸ªæ¯”è¾ƒå…¨é¢çš„ [Intellij IDEA æ•™ç¨‹](https://github.com/judasn/IntelliJ-IDEA-Tutorial)

**å·¥æ¬²å–„å…¶äº‹, å¿…å…ˆåˆ©å…¶å™¨. ä¸€ä»¶è¶æ‰‹çš„å…µå™¨å¸¦ä½ è¿å¨¶ç™½å¯Œç¾, èµ°ä¸Šäººç”Ÿå·…å³°, ç»Ÿä¸€æ±Ÿæ¹–, æŒ‡æ—¥å¯å¾…**

![E5B0DCDC-184E-4B43-9445-4D37AB01FCB8](http://qiniu.dong4j.info/2019-07-03-E5B0DCDC-184E-4B43-9445-4D37AB01FCB8.png)

ä¸ºäº†ç®€åŒ–æ‰‹åŠ¨æ“ä½œå’Œæé«˜ç¼–ç æ•ˆç‡, è¦æ±‚å®‰è£…å‡ ä¸ªå¿…è¦çš„æ’ä»¶, ä»¥åŠå¯¹ IDEA è¿›è¡Œå¿…è¦çš„ä¼˜åŒ–é…ç½®

### Intellij IDEA æ’ä»¶

#### Alibaba Java Coding Guidelines

> `å¿…é¡»` å®‰è£…, ä»£ç è§„èŒƒæ£€æŸ¥çš„åŸºç¡€

**ä½œç”¨: ä»£ç è§„åˆ™æ£€æŸ¥**

æ­¤æ’ä»¶æ˜¯ é˜¿é‡Œå·´å·´æ ¹æ® [é˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œ](https://github.com/alibaba/p3c/) å¼€å‘çš„ä¸€ä¸ªé™æ€ä»£ç è§„èŒƒæ£€æŸ¥æ’ä»¶, æ¯ä¸ªè­¦å‘Šéƒ½æä¾›äº†ä¸€ä¸ª demo, 

![-w1184](http://qiniu.dong4j.info/2019-07-03-15328795139039.jpg)
æ­¤ç¯‡ä»¥ [é˜¿é‡Œå·´å·´å¼€å‘æ‰‹å†Œ](https://github.com/alibaba/p3c/) ä¸ºåŸºç¡€, ä½†æ˜¯å¹¶ä¸ä¼šä¸€ä¸€ç½—åˆ—æ¯æ¡è§„èŒƒ, å› ä¸ºæ­¤æ’ä»¶å·²ç»èƒ½å¾ˆå¥½çš„æ£€æŸ¥äº†.

**æ­¤ç¯‡é‡ç‚¹åœ¨äºè¿™ä¸ªæ’ä»¶ä¸èƒ½æ£€æŸ¥çš„è§„èŒƒ.**

#### lombok

> `å¿…é¡»` å®‰è£…, ä¸ç„¶ä»£ç è·‘ä¸èµ·æ¥å°±å°´å°¬äº†

**ä½œç”¨: åŒ–ç¹ä¸ºç®€. [å®˜ç½‘]([http://projectlombok.org/](http://projectlombok.org/))**

ä½¿ç”¨ `@Data` ä»£æ›¿çƒ¦äººçš„ get/set æ–¹æ³•

![-w985](http://qiniu.dong4j.info/2019-07-03-15328790004411.jpg)

ä½¿ç”¨ `@Slf4j` ä»£æ›¿è·å– log å®ä¾‹çš„ä»£ç   

```java
private static final Logger log = LoggerFactory.getLogger(ApplicationTest.class);
```

![-w587](http://qiniu.dong4j.info/2019-07-03-15328779809729.jpg)


**ä½¿ç”¨æ–¹å¼**: 

1. åœ¨pomæ–‡ä»¶ä¸­æ·»åŠ : 

```xml
<!-- lombok-->
<dependency>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
    <version>${lombok.version}</version>
</dependency>
```

2. åœ¨ IDEA ä¸­æ·»åŠ æ’ä»¶ `lombok` ï¼ˆfile->setting->pluginsï¼‰
3. IDEA è®¾ç½® 

![-w1170](http://qiniu.dong4j.info/2019-07-03-15328775278509.jpg)

#### Maven Helper

> `å¿…é¡»` å®‰è£…, ä¸ç„¶ä¾èµ–å†²çªäº†å°±ä¸å¥½äº†

**ä½œç”¨: æ£€æŸ¥ä¾èµ–å†²çª**

æ–°åŠ å…¥ä¸€ä¸ª jar åŒ…, è°æ·»åŠ è°è´Ÿè´£, ä½¿ç”¨æ­¤æ’ä»¶æ£€æŸ¥æ˜¯å¦æœ‰ä¾èµ–å†²çª.

ä¾èµ–å†²çªå¯èƒ½ä¼šå¯¼è‡´:

1. java.lang.ClassNotFoundException
2. java.lang.NoSuchMethodError
3. java.lang.NoClassDefFoundError
4. å¼€å‘ç¯å¢ƒæ­£å¸¸, æµ‹è¯•æˆ–è€…ç”Ÿäº§ç¯å¢ƒä¸æ­£å¸¸....

![-w900](http://qiniu.dong4j.info/2019-07-03-15328788693057.jpg)


#### JavaDoc

> `å¿…é¡»` å®‰è£…

**ä½œç”¨: å¿«é€Ÿç”Ÿæˆæ ‡å‡†çš„ javadoc**

![2018-07-30 14.28.41](http://qiniu.dong4j.info/2019-07-03-2018-07-30%2014.28.41.gif)


#### JRebel

> `æ¨è` å®‰è£…, æé«˜å·¥ä½œæ•ˆç‡çš„æ’ä»¶. 

**ä½œç”¨: ä»£ç çƒ­éƒ¨ç½²æ’ä»¶, æ”¹äº†ä»£ç å, é‡æ–°ç¼–è¯‘, ä¸ç”¨é‡å¯åº”ç”¨å°±å¯æŸ¥çœ‹æ•ˆæœ.**

çƒ­éƒ¨ç½²æ’ä»¶, è°ç”¨è°çŸ¥é“;

[ç§‘å­¦ä½¿ç”¨æ–¹æ³•](http://blog.lanyus.com/search/JRebel/) (ä½è°ƒç‚¹)

#### Mybatis Plugin

> `æ¨è` å®‰è£…, æé«˜å·¥ä½œæ•ˆç‡çš„æ’ä»¶.

**ä½œç”¨: xml å’Œ dao å¿«é€Ÿè·³è½¬; å¿«é€Ÿç”Ÿæˆ xml; xml æ£€æŸ¥**

![2018-07-30 10.25.12](http://qiniu.dong4j.info/2019-07-03-2018-07-30%2010.25.12.gif)



#### GenerateSerialVersionUID

> `æ¨è` å®‰è£…, æé«˜å·¥ä½œæ•ˆç‡çš„æ’ä»¶

**ä½œç”¨: ä¸ºå®ç°äº† Serializable æ¥å£çš„å®ä½“å¿«é€Ÿæ·»åŠ  serialVersionUID, æé«˜æ•ˆç‡**

å› ä¸ºè¦æ±‚å®ä½“ `å¿…é¡»` å®ç° `Serializable` æ¥å£, è€Œä¸”`å¿…é¡»` æ·»åŠ  `serialVersionUID` å­—æ®µ.

![2018-07-29 23.48.26](http://qiniu.dong4j.info/2019-07-03-2018-07-29%2023.48.26.gif)



#### GenerateAllSetter

> `æ¨è` å®‰è£…, æé«˜å·¥ä½œæ•ˆç‡çš„æ’ä»¶

**ä½œç”¨: å¿«é€Ÿç”Ÿæˆ set æ–¹æ³•**

![2018-07-29 23.59.07](http://qiniu.dong4j.info/2019-07-03-2018-07-29%2023.59.07.gif)



#### Translation

> `æ¨è` å®‰è£…, æé«˜å·¥ä½œæ•ˆç‡çš„æ’ä»¶

**ä½œç”¨: ç¿»è¯‘æ’ä»¶, æä¾› ç™¾åº¦, æœ‰é“, Google ç¿»è¯‘**

ä¸€æ¬¾ä¸ºåƒæˆ‘è¿™ç§è‹±è¯­æ¸£çš„ç å†œé‡èº«å®šåšçš„æ’ä»¶ ğŸ˜‚

![2018-07-30 00.05.57](http://qiniu.dong4j.info/2019-07-03-2018-07-30%2000.05.57.gif)


#### Grep Console

> `æ¨è` å®‰è£…

**ä½œç”¨: é«˜äº®æ˜¾ç¤º log ä¸åŒçº§åˆ«æ—¥å¿—, çœ‹æ—¥å¿—çš„æ—¶å€™ä¸€ç›®äº†ç„¶; å…·æœ‰ error çº§åˆ«å£°éŸ³æé†’åŠŸèƒ½(å¯è®¾ç½®)**

æ•ˆæœ:

![-w1274](http://qiniu.dong4j.info/2019-07-03-15328811376957.jpg)

æ’ä»¶è®¾ç½®:

![-w1189](http://qiniu.dong4j.info/2019-07-03-15328811964699.jpg)
æ­¤æ’ä»¶é€šè¿‡ log è¾“å‡ºä¸­çš„ info/debug/warn/error æ¥åŒ¹é…å¯¹åº”çš„é¢œè‰². å› æ­¤ log è¾“å‡ºä¸­å¿…é¡»åŒ…å« **æ—¥å¿—çº§åˆ«**, è¿™ä¸ª **æ—¥å¿—è§„èŒƒ** ä¸­å†è¯´.


#### RestfulToolkit

> `æ¨è` å®‰è£…

**ä½œç”¨: å¿«é€Ÿå®šä½æ¥å£, Rest è¯·æ±‚æ¨¡æ‹Ÿ**

![2018-07-30 10.32.58](http://qiniu.dong4j.info/2019-07-03-2018-07-30%2010.32.58.gif)


#### Restore Sql for iBatis/Mybatis

> `æ¨è` å®‰è£…

**ä½œç”¨: æŸ¥çœ‹è¯·æ±‚ sql, å¯ç›´æ¥è¿è¡Œ**

æ•ˆæœ:

`meeting-service` è°ƒç”¨ `/login` æ¥å£åéœ€è¦æ‰§è¡Œçš„ sql

![-w999](http://qiniu.dong4j.info/2019-07-03-15329308524148.jpg)


### Intellij IDEA è®¾ç½®

#### ç¼–ç è®¾ç½®

> ç¼–ç  `å¿…é¡»` ä½¿ç”¨ `UTF-8`, ä¸” `å¿…é¡»` è®¾ç½®ä¸º `with NO BOM`

![-w1036](http://qiniu.dong4j.info/2019-07-03-15329216121953.jpg)

`è¸©å‘`

**Windows ä¸‹è¯·ä¸è¦ç”¨è®°äº‹æœ¬æ‰“å¼€ UFT-8 ç¼–ç çš„æ–‡æœ¬æ–‡ä»¶, æ›´ä¸è¦ä¿å­˜**

Windows å‘çš„å¾ˆ, UTF-8 ç¼–ç çš„æ–‡æœ¬æ–‡ä»¶æœ€å‰é¢ä¼šç»™ä½ åŠ ä¸Šä¸€ä¸ª BOM, å…¶ä»–ç³»ç»Ÿæ‰“å¼€æ˜¯æ­£å¸¸æ˜¾ç¤º, ä½†æ˜¯ä¸ä¼šæ˜¾ç¤ºè¿™ä¸ª BOM, é€ æˆæ–‡ä»¶è§£æå‡ºé”™.

##### html è®¾ç½®ç¼–ç ä¸º UTF-8

```html
<meta charset="UTF-8">
```

> html æˆ–è€…æ¨¡æ¿ `åº”è¯¥` ä½¿ç”¨ html5

html4 å‡çº§ä¸º html5 éå¸¸ç®€å•

```html
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="css.css">
    <script type="text/javascript" src="jquery.js"></script>
    <title>Document</title>
</head>
<body>
</body>
</html>
```

ä¿®æ”¹ä¸º:

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="css.css">
    <script src="jquery.js"></script>
    <title>Document</title>
</head>
<body>
</body>
</html>
```

ç®€å•çš„å‡çº§, å°±èƒ½äº«å— 30 å¤šä¸ªæ–°æ ‡ç­¾å¸¦æ¥çš„ä¾¿æ·, ä½•ä¹è€Œä¸ä¸ºå‘¢?

å°±è·Ÿè¶…å¸‚æ‰“æŠ˜ä¸€æ ·, è¿˜å€’é€ä½ 30å—, è·³å¹¿åœºèˆçš„å¤§å¦ˆæ’ç€é˜Ÿå», ä½ è¿˜ä¸å»?

##### Tomcat è®¾ç½®ç¼–ç ä¸º UTF-8

```xml
<Connector port="8080" protocol="HTTP/1.1" 
                connectionTimeout="20000" 
                redirectPort="8443"  />
```   

æ”¹ä¸º:

```xml
<Connector port="8080" protocol="HTTP/1.1" 
                connectionTimeout="20000" 
                redirectPort="8443" 
                URIEncoding="UTF-8" />
``` 

Tomcat7 é»˜è®¤ç¼–ç ä¸º ISO-8859-1, åˆ°äº† Tomcat8 å, é»˜è®¤ç¼–ç æ”¹ä¸º UTF-8
å› æ­¤ä»¥ä¸Šä¿®æ”¹åªé’ˆå¯¹äº Tomcat7.

#### todo æ ‡è¯†

> `å¿…é¡»`

**ä½œç”¨: æ–¹ä¾¿æœç´¢, æ˜ç¡®è´Ÿè´£äºº, è¯´æ˜ todo åŸå› **

è¿™é‡Œæ‰©å±•äº† IDEA è‡ªå¸¦çš„ todo æ ‡è¯†, ä½¿ç”¨ `todo-è´Ÿè´£äºº: (æ—¶é—´) [åŸå› ]` æ¥è§„èŒƒ `todo` ç”¨æ³•

![-w1172](http://qiniu.dong4j.info/2019-07-03-15329324780441.jpg)

```lua
todo-è´Ÿè´£äºº: ($date$ $time$) [$SELECTION$]
```

**date time è®¾ç½®è§ ç±»æ³¨é‡Šä¸€èŠ‚**

æ•ˆæœ:

![2018-07-30 14.35.26](http://qiniu.dong4j.info/2019-07-03-2018-07-30%2014.35.26.gif)


#### fixme æ ‡è¯†

> `å¿…é¡»` 

```lua
fixme-è´Ÿè´£äºº: ($date$ $time$ [$SELECTION$])
```

è®¾ç½®å’Œæ•ˆæœåŒä¸Š

#### ç±»æ³¨é‡Š

> `å¿…é¡»` ä¸ºæ¯ä¸ªç±»æ·»åŠ å¿…è¦çš„æ³¨é‡Š

è¿™é‡Œæœ‰2ä¸­æ–¹å¼:

**1. æ–°å»ºç±»æ—¶æ·»åŠ æ³¨é‡Š**

![2018-07-30 14.51.14](http://qiniu.dong4j.info/2019-07-03-2018-07-30%2014.51.14.gif)
   

è®¾ç½®æ–¹å¼:

 ![-w1185](http://qiniu.dong4j.info/2019-07-03-15329339225336.jpg)
 
```java
#if (${PACKAGE_NAME} && ${PACKAGE_NAME} != "")package ${PACKAGE_NAME};#end
##parse("File Header.java")

/**
 * <p>Company: ç§‘å¤§è®¯é£è‚¡ä»½æœ‰é™å…¬å¸-å››å·åˆ†å…¬å¸</p>
 * <p>Description: ${description}</p>
 Â¶*
 * @author ä½ çš„æ˜µç§°
 * @date ${YEAR}-${MONTH}-${DAY} ${HOUR}:${MINUTE}
 * @email åŸŸå@iflytek.com
 */
public class ${NAME} {
}
```

**2. ä¸ºå·²å­˜åœ¨çš„ç±»æ·»åŠ æ³¨é‡Š**

![2018-07-30 14.54.17](http://qiniu.dong4j.info/2019-07-03-2018-07-30%2014.54.17.gif)

è®¾ç½®æ–¹å¼:

![-w1112](http://qiniu.dong4j.info/2019-07-03-15329341699207.jpg)

```java
/**
 * <p>Company: ç§‘å¤§è®¯é£è‚¡ä»½æœ‰é™å…¬å¸-å››å·åˆ†å…¬å¸</p>
 * <p>Description: $END$</p>
 *
 * @author ä½ çš„æ˜µç§°
 * @date $date$ $time$
 * @email åŸŸå@iflytek.com
 */
```

#### æ–¹æ³•æ³¨é‡Š

> `æ¨è` ä½¿ç”¨ JavaDoc æ’ä»¶è‡ªåŠ¨ç”Ÿæˆ

JavaDoc åªèƒ½è‡ªåŠ¨ç”Ÿæˆé `private` æ–¹æ³•å’Œå±æ€§çš„æ³¨é‡Š, å¦‚æœéœ€è¦ç”Ÿæˆ `private` çº§çš„æ³¨é‡Š, å¯ä»¥é€šè¿‡ä¿®æ”¹ `public`, ç”Ÿæˆå®Œæˆå, å†ä¿®æ”¹å›æ¥

#### ä»£ç æ³¨é‡Š

> `ä¸è¯¥` ä½¿ç”¨è¡Œå°¾æ³¨é‡Š;
> `æ¨è` ä½¿ç”¨ // ä»£æ›¿ /\*...\*/ å¤šè¡Œæ³¨é‡Š;
> `æ¨è` ä½¿ç”¨ /\*\*..\*/ å¯¹å­—æ®µè¿›è¡Œæ³¨é‡Š(å•è¡Œ);
> æ‰€æœ‰å­—æ®µå, æ–¹æ³•å, ç±»å éƒ½ `åº”è¯¥` ä½¿ç”¨ç®€å•, ä¸šç•Œå¸¸ç”¨çš„å•è¯å‘½å, ä¸è¦ä¸ºäº†æ³¨é‡Šè€Œæ³¨é‡Š, è®²ç©¶ä¸ªä»£ç ä¹‹ç¾.

åœ¨æŸ¥çœ‹å¤§æ®µä»£ç æ—¶, `æ¨è` ä½¿ç”¨ 

```java
// region æ®µæ³¨é‡Š
....
//endregion
```

**æ­¤æ³¨é‡Šèƒ½å¢åŠ ä»£ç æŠ˜å åŠŸèƒ½, ä¾¿äºå¿«é€Ÿæ¢³ç†ä»£ç **

![2018-07-30 22.44.45](http://qiniu.dong4j.info/2019-07-03-2018-07-30%2022.44.45.gif)


### Version Control è®¾ç½®

> `å¿…é¡»` å¿½ç•¥ target ç›®å½•
> `å¿…é¡»` å¿½ç•¥ .idea
> `å¿…é¡»` å¿½ç•¥ *.iml
> `å¿…é¡»` æ·»åŠ  .ignore æ–‡ä»¶

**å¦‚æœä½¿ç”¨ git, æ‰€æœ‰å¿½ç•¥æ–‡ä»¶éƒ½å¯ä»¥æ·»åŠ åˆ° .ignore å³å¯**

**æäº¤ä»£ç æ—¶çš„è®¾ç½®**

![-w1089](http://qiniu.dong4j.info/2019-07-03-15329625162083.jpg)

> `å¿…é¡»` å‹¾é€‰ Optimize imports; (æäº¤ä»£ç æ—¶, è‡ªåŠ¨åˆ é™¤ä¸è¢«ä½¿ç”¨çš„ import)
> `æ¨è` å–æ¶ˆæ‰é»˜è®¤å‹¾é€‰çš„ Perform code analysis å’Œ Check TODO, ä¼šå¢åŠ æäº¤ä»£ç çš„æ—¶é—´;
> `ä¸è¯¥` å‹¾é€‰ Reformat code, ä¼šæ ¼å¼åŒ–æ‰€æœ‰æäº¤çš„ä»£ç , æ ¼å¼åŒ–ä»£ç åº”è¯¥è‡ªå·±æ‰‹åŠ¨æ ¼å¼åŒ–, è¿™æ ·èƒ½å‡å°‘ä»£ç å†²çªçš„å¯èƒ½;

## ä»£ç æ ·å¼

ä»¥ intellij-java-google-style.xml ä¸ºåŸºç¡€, åšäº†ä¸€éƒ¨åˆ†ä¿®æ”¹.

> musicsearch-project `å¿…é¡»çš„å¿…é¡»` ä½¿ç”¨æ­¤ä»£ç æ ·å¼, ä¸ºäº†å‡å°‘ä»£ç å†²çª, åŒä¸€ä»£ç æ ·å¼ (åŒä¸€é—¨æ´¾, ä½ å»ä¿®ç‚¼å…¶ä»–é—¨æ´¾æ­¦åŠŸ, ä¼šè¢«é€å‡ºå¸ˆé—¨çš„!).

æ¯”å¦‚:

1. ä¸€è¡Œçš„ä»£ç é•¿åº¦ä¸èƒ½è¶…è¿‡ 140 å®½;
2. ç­‰å·å¯¹é½;
3. if è¯­å¥åªæœ‰ä¸€è¡Œä¹Ÿ `å¿…é¡»` åŠ å¤§æ‹¬å·;
4. æ‰€æœ‰æ“ä½œç¬¦ä¸¤è¾¹ `å¿…é¡»` æœ‰ç©ºæ ¼;
5. ç±»å, æ–¹æ³•å `å¿…é¡»` åŠ ç©ºæ ¼åæ‰è·Ÿ ä¸€ä¸ª `{`;
6. ä½¿ç”¨ 4 ä¸ªç©ºæ ¼ä»£æ›¿åˆ¶è¡¨ç¬¦(æˆ‘ä»¬è¿™é‡Œä¸è®¨è®ºç©ºæ ¼å¥½è¿˜æ˜¯åˆ¶è¡¨ç¬¦å¥½, ç»Ÿä¸€ä½¿ç”¨ä¸€ç§æ˜¯æœ€æœ€å¥½çš„);
7. ....

**ä»¥ä¸Šåˆ—ä¸¾çš„éƒ¨åˆ†è§„èŒƒéƒ½å¯ä»¥ä½¿ç”¨æ ¼å¼åŒ–è§£å†³;**

æœ¬äººå¯¹ä»£ç æœ‰ç€ä¸¥(å˜)æ ¼(æ€)çš„è¦æ±‚, ä¸¥(å˜)æ ¼(æ€)åˆ°ä½¿ç”¨ `//` åé¢ `å¿…é¡»` è·Ÿä¸€ä¸ªç©ºæ ¼, ç„¶åæ‰æ˜¯æ³¨é‡Šå†…å®¹; è‹±æ–‡å’Œä¸­æ–‡ä¹‹é—´ `å¿…é¡»` å¢åŠ ä¸€ä¸ªç©ºæ ¼; æ‰€æœ‰æ ‡ç‚¹å…¨éƒ¨ä½¿ç”¨è‹±æ–‡æ ‡ç‚¹; æ²¡æœ‰è¢«ä½¿ç”¨çš„ç±», å˜é‡éƒ½ `å¿…é¡»` åˆ é™¤; é‡åˆ°çš„è­¦å‘Š `å¿…é¡»` å°½æœ€å¤§åŠªåŠ›æ”¹æ­£;

å·¦è¾¹ä¸ºé‡æ„ä¹‹å‰çš„è­¦å‘Šæ•°é‡(é»„è‰²), å³è¾¹ä¸ºé‡æ„ä¹‹åçš„

![-w1152](http://qiniu.dong4j.info/2019-07-03-15329635760293.jpg)


1. è‹±æ–‡å’Œä¸­æ–‡ä¹‹é—´å¢åŠ ç©ºæ ¼æ˜¯ä¸ºäº†ä¾¿äºé˜…è¯», æ–¹ä¾¿æ‹·è´(åŒå‡»è‹±æ–‡å³å¯å…¨é€‰, å¦‚æœä¸å¢åŠ ç©ºæ ¼, ä¸­æ–‡è‹±æ–‡åˆ™ä¼šå…¨è¢«é€‰ä¸­. æˆ‘å˜æ€åˆ° chrome éƒ½è¦å®‰è£…ä¸€ä¸ªå« `ç©ºæ ¼ä¹‹ç¥` çš„æ’ä»¶, ç”¨äºåœ¨ä¸­è‹±æ–‡ä¹‹é—´è¿½åŠ ç©ºæ ¼);
2. å…¨éƒ¨ä½¿ç”¨è‹±æ–‡æ ‡ç‚¹çš„å¥½å¤„ä¸è¨€è€Œå–», Java ä¹ƒè‡³æ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€éƒ½ä¸æ”¯æŒä¸­æ–‡æ ‡ç‚¹, æ‰“ä¸ªåˆ†å·è¿˜å¾—åˆ‡æ¢è¾“å…¥æ³•, æƒ³æƒ³éƒ½å¿§ä¼¤; æœ‰æ—¶å€™å°±æ˜¯å› ä¸ºä¸­æ–‡æ ‡ç‚¹çš„é—®é¢˜, ä¸€ç›´æŠ¥é”™(è¾“å…¥æ³•å¯ä»¥è®¾ç½®ä¸­æ–‡æ—¶ä½¿ç”¨è‹±æ–‡æ ‡ç‚¹, `æ¨è` è¿™ç§è®¾ç½®);
3. ç¬¦å·åé¢å–œæ¬¢è¿½åŠ ä¸€ä¸ªç©ºæ ¼, æ˜¯å— Markdown è¯­æ³•çš„å½±å“, ä»¥å‰ç”¨è¿‡å¾ˆå¤š Markdown ç¼–è¾‘å·¥å…·, ç”±äºè§£æè¯­æ³•ä¸ä¸€æ ·, è¿ç§»æ—¶æ¸²æŸ“ä¸ç”Ÿæ•ˆ, åŠ ä¸ªç©ºæ ¼æˆ–è€…æ¢è¡Œå°± Ok äº†; ğŸ˜‚
4. åŠæ—¶åˆ é™¤ä¸éœ€è¦çš„ä»£ç , æ—¶åˆ»ä¿æŒä»£ç å¹²å‡€(IDEA ä¼šå¸®æˆ‘ä»¬æ£€æŸ¥æœªä½¿ç”¨çš„ä»£ç ).
5. **è­¦å‘Šæ˜¯ bug çš„æ¸©åºŠ, ä¿®å¤è­¦å‘Š, å°±æ˜¯ä¿®å¤æ½œåœ¨çš„ bug**. ä¿®å¤è­¦å‘Š, ä¹Ÿèƒ½å­¦åˆ°å¾ˆå¤šä¸œè¥¿çš„ (ğŸ˜)

## musicsearch-project è§„èŒƒ

ä»¥ä¸‹ä½œä¸º `musicsearch-project` è§„èŒƒ, åˆ¶å®šäº†å¤§éƒ¨åˆ†è¦æ±‚.

å…·ä½“è®¾è®¡å°†åœ¨ ç¬¬ä¸‰ç¯‡ ä»‹ç»

### é¡¹ç›®ç»“æ„è§„èŒƒ

```lua
.
â”œâ”€â”€ musicsearch-business            # ä¸šåŠ¡ä¸»æ¨¡å—
â”‚Â Â  â”œâ”€â”€ business-common             # ä¸šåŠ¡å…¬å…±ç±»åº“
â”‚Â Â  â”œâ”€â”€ mservice-migu-game          # migu-game ä¸šåŠ¡
â”‚Â Â  â””â”€â”€ service-meeting             # meeting æœåŠ¡æ¨¡å—
â”œâ”€â”€ musicsearch-common              # musicsearch é¡¹ç›® å…¬å…±æ¨¡å—
â”œâ”€â”€ musicsearch-component           # ç»„ä»¶ä¸»æ¨¡å—
â”‚Â Â  â”œâ”€â”€ component-iavp              # iavp æ¨¡å—, å°è£… iavp ç›¸å…³å®ä½“å’Œæ¥å£, ç›´æ¥æ³¨å…¥å³å¯
â”‚Â Â  â”œâ”€â”€ component-mybatis           # mybatisæ¨¡å—, æä¾›ä»£ç ç”Ÿæˆå’Œ mybatis ç›¸å…³åŠŸèƒ½
â”‚Â Â  â”œâ”€â”€ component-redis             # redis æ¨¡å—, æ³¨å…¥ RedisService å³å¯, æä¾›å¤šç§æ¨¡å¼
â”‚Â Â  â””â”€â”€ component-websocket         # websocket æ¨¡å— netty-socket.io å°è£…
â”œâ”€â”€ musicsearch-demo                # demo ä¸»æ¨¡å—
â”‚Â Â  â”œâ”€â”€ component-mybatis-demo
â”‚Â Â  â””â”€â”€ component-redis-demo
â”œâ”€â”€ musicsearch-dependencies        # ç®¡ç†ç¬¬ä¸‰æ–¹ jar ç‰ˆæœ¬å’Œä¾èµ–å…³ç³»
â”œâ”€â”€ musicsearch-monitor             # ç›‘æ§ä¸»æ¨¡å—
â”œâ”€â”€ musicsearch-parent              # musicsearch å·¥ç¨‹ä¸»æ¨¡å—, ç®¡ç†æ•´ä¸ªåŠŸèƒ½çš„ç‰ˆæœ¬åŠä¾èµ–
â”‚Â Â  â””â”€â”€ docs                        # æ”¾å·¥ç¨‹ç›¸å…³æ–‡æ¡£
â”‚Â Â  â””â”€â”€ database                    # æ”¾å·¥ç¨‹ sql
â””â”€â”€ musicsearch-support             # æ”¯æ’‘æ¨¡å—ä¸»æ¨¡å—
    â”œâ”€â”€ musicsearch-code-generator  
    â”œâ”€â”€ musicsearch-management-system
    â””â”€â”€ musicsearch-timer-task
```

ç›®å‰é‡æ„åçš„æ¨¡å—, å¯èƒ½è¿˜ä¼šæœ‰ä¿®æ”¹. 
ä½†æ˜¯å‡ ä¸ªä¸»è¦æ¨¡å—ä¸ä¼šå†ä¿®æ”¹äº†.

> æ•´ä¸ªé¡¹ç›®ç»“æ„é‡‡ç”¨ `Maven` å¤šæ¨¡å—çš„æ–¹å¼å¼€å‘. 
> ç›®çš„æ˜¯ä¸ºäº†è§£å†³ jar ä¾èµ–æ··ä¹±é—®é¢˜.

**ç»“æ„è§„èŒƒ:**

> æ‰€æœ‰ä¸»æ¨¡å— `å¿…é¡»` ä»¥ `musicsearch-` å¼€å§‹. 

ä¸ä¸ºåˆ«çš„, çº¯å±ç»Ÿä¸€å‰ç¼€, å¥½çœ‹è€Œå·²

> æ¨¡å—å `å¿…é¡»` å…¨éƒ¨ä½¿ç”¨å°å†™, å•è¯ä¹‹é—´ä½œç”¨ `-` åˆ†éš”;


#### musicsearch-parent

ä½œä¸ºæ•´ä¸ªé¡¹ç›®çš„ çµé­‚ æ¨¡å—, ç®¡ç†æ‰€æœ‰è‡ªæœ‰æ¨¡å—çš„ç‰ˆæœ¬å’Œä¾èµ–å…³ç³», ä»¥åŠæ•´ä¸ªé¡¹ç›®éƒ½ä¼šä½¿ç”¨åˆ°çš„ä¾èµ–, æ¯”å¦‚ `lombok`, `junit` ç­‰.

![-w1004](http://qiniu.dong4j.info/2019-07-03-15330039207873.jpg)
`dependencyManagement` æ ‡ç­¾åªæ˜¯ç”¨äºå£°æ˜å¯èƒ½ä¼šè¢«ä½¿ç”¨åˆ°çš„ä¾èµ– (å°±åƒå®šä¹‰å˜é‡), ä¸ä¼šçœŸæ­£æ·»åŠ ä¾èµ–
`dependency` æ‰ä¼šçœŸæ­£çœŸæ­£å¼•å…¥ä¾èµ–

è¿™é‡Œå…¨éƒ¨ä¸º `musicsearch-project` è‡ªæœ‰æ¨¡å—, ä»¥åæ–°å¢çš„æ¨¡å—ä¹Ÿ `å¿…é¡»` å°†å£°æ˜æ·»åŠ åˆ°æ­¤æ ‡ç­¾ä¸‹
è‡ªæœ‰æ¨¡å—ä¹‹é—´ä¾èµ–å°±å¯ç›´æ¥ä½¿ç”¨.

![-w1004](http://qiniu.dong4j.info/2019-07-03-15330045748142.jpg)
ä½¿ç”¨æ—¶, `ä¸€å®šä¸å¯` æ·»åŠ  version æ ‡ç­¾, ä¸ç„¶å°±ä¼šä½¿ç”¨ä¿®æ”¹åçš„ç‰ˆæœ¬, å¯èƒ½ä¼šé€ æˆä¾èµ–å†²çª.


----

`musicsearch-project` æ¨¡å—ä¸‹æœ‰ä¸€ä¸ª doc ç›®å½•, ç”¨äºä¿å­˜æ–‡æœ¬æ–‡æ¡£

ä¸ªäººè®¤ä¸º, é¡¹ç›®çš„ `æŠ€æœ¯æ–‡æ¡£` è·Ÿç€ä»£ç èµ°æ‰æ˜¯æœ€æ­£ç¡®çš„åšæ³•. 
éšæ—¶ä¿®æ”¹, éšæ—¶æŸ¥çœ‹, ä»£ç å’Œæ–‡æ¡£ä¸€èµ·æ›´æ–°æäº¤, æ‰æ˜¯æœ€ä½³å®è·µ.

![-w1004](http://qiniu.dong4j.info/2019-07-03-15330065876404.jpg)
æŠ€æœ¯æ–‡æ¡£ `æ¨è` ä½¿ç”¨ `Markdown` è¯­æ³•ç¼–å†™, æœ€å¥½æ˜¯ [GitHub Markdown è¯­æ³•](https://guides.github.com/features/mastering-markdown/).


è¿™é‡Œç»™å‡ºæ¨¡å—è¯´æ˜æ¨¡æ¿, æ¯ä¸ªæ¨¡å—éƒ½ `å¿…é¡»` æœ‰æ­¤æ–‡æ¡£

```markdown
# æ¨¡å—å

## ç®€ä»‹

xxx

## æ‰“åŒ…æ–¹å¼

xxx

## éƒ¨ç½²æ–¹å¼

xxx

## ä½¿ç”¨è¯´æ˜

1. xxx
2. xxx
3. xxx

## æ³¨æ„äº‹é¡¹

xxx

## æ›´æ–°å†å²

**æ›´æ–°æ—¶é—´ æ›´æ–°äºº**

1. xxx
2. xxx
```

---

`database` ç”¨äºä¿å­˜éœ€æ±‚éœ€è¦æ›´æ–°çš„ sql æ–‡ä»¶, `å¿…é¡»` ä»¥ `.sql` ä¸ºåç¼€, `å¿…é¡»` æ˜¯ UTF-8 ç¼–ç .

#### musicsearch-dependencies

æ­¤æ¨¡å—æ˜¯ä¸ºäº†æ–¹ä¾¿ç®¡ç†ç¬¬ä¸‰æ–¹ jar ä¾èµ–è€Œç‰¹æ„æ·»åŠ çš„, å¦‚æœæ²¡æœ‰æ­¤æ¨¡å—, ç¬¬ä¸‰æ–¹ä¾èµ–ä¹Ÿå¯ä»¥æ·»åŠ åˆ° `musicsearch-project`ä¸­, ä½†æ˜¯ä¼šé€ æˆè¿‡åº¦è‡ƒè‚¿, å› æ­¤å°†ç¬¬ä¸‰æ–¹ä¾èµ–æ‹†åˆ†åˆ°æ­¤æ¨¡å—ä¸­è¿›è¡Œç»Ÿä¸€ç®¡ç†.

> ç¬¬ä¸‰æ–¹ä¾èµ– `å¿…é¡»` æ·»åŠ åˆ°æ­¤æ¨¡å—, ä¸” `å¿…é¡»` å°†ç‰ˆæœ¬å·è®¾ç½®åˆ° properties æ ‡ç­¾ä¸‹.
> ç¬¬ä¸‰æ–¹ä¾èµ–è¾ƒå¤§å¯èƒ½å­˜åœ¨ç‰ˆæœ¬å†²çª, å› æ­¤æ­¤æ¨¡å—çš„ç‰ˆæœ¬ä» `0.0.1` å¼€å§‹, ä¸å’Œ `musicsearch-parent` ç›¸åŒ, å¦‚æœæ­¤æ¨¡å—å­˜åœ¨ä¾èµ–é—®é¢˜, ä¿®å¤å, éœ€è¦æå‡ç‰ˆæœ¬å·, å¹¶ä¸” `å¿…é¡»` å†™æ›´æ–°è®°å½•.

æ­¤æ¨¡å—æ¯”è¾ƒç‰¹æ®Š, ä¿®æ”¹ä¼šæ¯”è¾ƒé¢‘ç¹, ä¾èµ–å‡ºé”™å¤§éƒ¨åˆ†å‡ºç°åœ¨æ­¤æ¨¡å—, å› æ­¤å•ç‹¬å†™ä¸€ä¸ª `changes.md`, ç”¨äºè®°å½•æ›´æ–°æ—¥å¿—.

![-w1004](http://qiniu.dong4j.info/2019-07-03-15330079677253.jpg)

**å¼•å…¥æ–°ä¾èµ–æ­¥éª¤**

1. åœ¨ `musicsearch-dependencies` æ·»åŠ æ–°ä¾èµ–;
2. å°†ç‰ˆæœ¬ä¿¡æ¯å†™å…¥åˆ° pom çš„ properties æ ‡ç­¾å†…, è¿›è¡Œç»Ÿä¸€ç®¡ç†;
3. åœ¨éœ€è¦çš„æ¨¡å—ä¸­, å¼•å…¥ä¾èµ–;
4. æœ€åä½¿ç”¨ `Maven Helper` æ’æŸ¥æ˜¯å¦å­˜åœ¨ä¾èµ–å†²çª;
5. å¦‚æœå­˜åœ¨å†²çª éœ€è¦ä½¿ç”¨ `<exclusions>` æ’é™¤ç›¸åº”çš„ä¾èµ–;

#### musicsearch-common

`musicsearch-project` é¡¹ç›®çš„å­æ¨¡å—, ä½œä¸ºæœ€åº•å±‚çš„ä¾èµ–, æä¾›äº†å…¬å…± util åŒ…, core åŒ…, base åŒ…ç­‰åŸºç¡€ä»£ç .

> å¦‚æœè¢«æ•´ä¸ªé¡¹ç›®ä½¿ç”¨åˆ°çš„ä»£ç , éƒ½ `å¿…é¡»` æ”¾å…¥æ­¤æ¨¡å—, æ¯”å¦‚ StringUtils å·¥å…·ç±», ä¸€äº›åŠ å¯†ç±», æ•´ä¸ªé¡¹ç›®éƒ½èƒ½ä½¿ç”¨åˆ°çš„å¸¸é‡ç±», æšä¸¾ç±»ç­‰; 

**å¿…é¡»è¦æå‡ºçš„æ˜¯:**

ä¸è¦å¤šä¸ªæ¨¡å—å¤šä¸ª StringUtils å·¥å…·ç±», æœ€ä½³å®è·µ `åº”è¯¥` æ˜¯ `musicsearch-common` ä¸­ç¼–å†™ä¸€ä¸ªé€šç”¨çš„ `StringUtils` ç±», ç»§æ‰¿è‡ª `org.apache.commons.lang3.StringUtils` ç±», ä¸šåŠ¡æ¨¡å—ç»§æ‰¿ `musicsearch-common` æ¨¡å—ä¸­çš„ `StringUtils` ç±», å®ç°ä¸šåŠ¡ç›¸å…³çš„å­—ç¬¦ä¸²å¤„ç†å·¥å…·ç±».(è¿™ç§æ–¹å¼åŒæ ·é€‚ç”¨äºå…¶ä»–ç±»)

#### musicsearch-business

ä¸šåŠ¡æ¨¡å—çš„çˆ¶æ¨¡å—, `musicsearch-parent` æ¨¡å—çš„å­æ¨¡å—.
ç”¨äºç®¡ç†ä¸šåŠ¡æ¨¡å—å…±ç”¨çš„ jar ä¾èµ–.

> æ‰€æœ‰ä¸šåŠ¡æ¨¡å— `å¿…é¡»` æ˜¯ `musicsearch-business` çš„å­æ¨¡å—

å°†ä¸šåŠ¡ä»£ç å…¨éƒ¨æ•´åˆåœ¨ä¸€ä¸ªæ¨¡å—ä¸­, ä½¿ç”¨ä¸šåŠ¡åè¿›è¡Œå†åˆ†å­æ¨¡å—çš„æ–¹å¼, ç®¡ç†æ•´ä¸ªä¸šåŠ¡ä»£ç .
å…¶ä»–å…±ç”¨æ¨¡å—ä½œä¸ºæ¡†æ¶åŸºç¡€æ¨¡å—, ä»¥åæ–°é¡¹ç›®è¿˜å¯ä»¥å¤ç”¨.

> ä¸æä¾› `dubbo service` çš„æ¨¡å—, `å¿…é¡»` ä»¥ `service-` å¼€å§‹.
> æä¾› `dubbo service` çš„æ¨¡å—, `å¿…é¡»` ä»¥ `mservice-` å¼€å§‹.

`mservice` çš„æ„æ€æ˜¯ `micro-service`. è¿™æ ·ä¾¿äºåŒºåˆ†ä¸åŒçš„æœåŠ¡ç±»å‹, ä¹Ÿæ–¹ä¾¿åˆ†ç»„.

æˆ‘ä»¬ç°åœ¨ä½¿ç”¨ `dubbo` æœåŠ¡æ²»ç†æ¡†æ¶, å¦‚æœä»¥åæœ‰å¯èƒ½è¯, å¯ä»¥å¾ˆæ–¹ä¾¿çš„è¿ç§»åˆ° `SOFA` æˆ–è€… `Spring Cloud` (æˆ‘å°±è¯´è¯´, åº”è¯¥æ˜¯ä¸å¯èƒ½çš„äº‹äº†).
 
ä¸šåŠ¡å­æ¨¡å—é™¤äº† `business-common` æ¨¡å—, å…¶ä»–å­æ¨¡å—éƒ½ä»¥ Web åº”ç”¨ æˆ–è€… JVM è¿›ç¨‹ç›´æ¥æä¾›æœåŠ¡.

#### business-common

`musicsearch-business` æ¨¡å—çš„å­æ¨¡å—, ä¾èµ–äº `musicsearch-common`.

> ä¸šåŠ¡æ¨¡å—å…±ç”¨çš„ä»£ç  `å¿…é¡»` æ”¾å…¥ `business-common` æ¨¡å—.

æ¯”å¦‚æ‰€æœ‰ä¸šåŠ¡éƒ½ä¼šç”¨åˆ°çš„ redis key å¸¸é‡ç±», åˆ™ `å¿…é¡»` æ”¾åœ¨ `business-common` æ¨¡å—ä¸­;
è€Œ `service-meeting` è¿™ä¸ªæ¨¡å—çš„ä¸šåŠ¡ç”¨åˆ°çš„ redis key å¸¸é‡åˆ™ `å¿…é¡»` æ”¾åˆ° `service-meeting` æ¨¡å—ä¸­.

è®²ç©¶èŒè´£åˆ†ç¦», å±‚çº§åˆ†æ˜, äº’ä¸å¹²æ¶‰; ä½ èµ°ä½ çš„é˜³å…³é“, æˆ‘çœ‹æˆ‘çš„ è¥¿è™¹å¸‚é¦–å¯Œ.

### æ¨¡å—å

> `å¿…é¡»` å…¨éƒ¨ä¸ºå°å†™, å•è¯ä¹‹é—´ `å¿…é¡»` ä½¿ç”¨ `-` åˆ†éš”.

ä¸è¦éšå¿ƒæ‰€æ¬²çš„å‘½å, è¦è®²ç©¶çš„è§„åˆ™, ä¸ç„¶ä¼šèµ°ç«å…¥é­”çš„.

> provider æ¨¡å—å `å¿…é¡»` ä»¥ `mservice-` å¼€å¤´;

provider æ¨¡å—ä¹Ÿæœ‰å¯èƒ½æ˜¯æœåŠ¡æ¶ˆè´¹è€…, è¿™ç±»çš„æ¨¡å—, è¿˜æ˜¯ `åº”è¯¥` ä½¿ç”¨ `mservice-` å¼€å¤´

å¯¹äº provider æ¨¡å—, è‡³å°‘åº”è¯¥åˆ†ä¸º 2 å±‚;

1. æœåŠ¡å-interface ,æä¾›ç»™ consumer çš„ä¾èµ–æ¨¡å—
2. æœåŠ¡å-service ,ä¸šåŠ¡å¤„ç†æ¨¡å—

> æœåŠ¡å-interface æ¨¡å— `å¿…é¡»` åŒ…å«ç”¨åˆ°çš„å®ä½“ç±», æ¥å£å®šä¹‰, dubbo-consumer-æœåŠ¡å.xml, å…±ç”¨çš„ util ç±», æšä¸¾ç±»ç­‰;

**å¿…é¡»è¦æå‡ºçš„æ˜¯:**

`dubbo-consumer-æœåŠ¡å.xml` é…ç½®æ–‡ä»¶ `åº”è¯¥` ç”± provider æ¥ç»´æŠ¤, è€Œ consumer åªéœ€è¦ import æ­¤é…ç½®æ–‡ä»¶å³å¯, è€Œä¸æ˜¯åœ¨è‡ªå·±çš„ Spring é…ç½®æ–‡ä»¶æˆ–è€…è‡ªå®šä¹‰ä¸€ä¸ª dubbo é…ç½®æ–‡ä»¶å†æ¥å†™å¼•å…¥çš„æ¥å£. 

è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ `dubbo-consumer-æœåŠ¡å.xml` `åº”è¯¥` åœ¨ interface æ¨¡å—çš„åŸå› .

è¿™é‡Œçœ‹çœ‹ migu-game é‡æ„ä¹‹å‰çš„ç»“æ„(æœ‰ä¸€äº›å°æ”¹åŠ¨)

**é…ç½®å…³ç³»:**

![-w871](http://qiniu.dong4j.info/2019-07-03-15330426626280.jpg)

è¿™é‡Œçš„ dubbo.xml å³ provider é…ç½®, å‰é¢ä¹Ÿè¯´äº†, è¿™æ ·çš„å‘½åæ–¹å¼ä¸å¤Ÿç›´è§‚, å› æ­¤ `åº”è¯¥` é‡‡ç”¨ `dubbo-provider-æœåŠ¡å` çš„æ–¹å¼å‘½å;

Spring-config.xml æ˜¯ä¸»é…ç½®, å¯¼å…¥äº†å…¶ä»– 5 ä¸ªé…ç½®;

```xml
<import resource="spring/dubbo.xml"/>
<import resource="spring/mybatis.xml"/>
<import resource="spring/dataSource.xml"/>
<import resource="classpath*:applicationContext-jms.xml"/>
<import resource="classpath*:applicationContext-redis.xml"/>
```

`applicationContext-jms.xml` å’Œ `applicationContext-redis.xml` è¿™ 2 ä¸ªé…ç½®åŸæ¥æ˜¯æ”¾åœ¨ web.xml ä¸­çš„.
è¿™é‡Œè¿å…¥åˆ° Spring-config.xml ä¸­, å› ä¸º web.xml åªéœ€è¦è´Ÿè´£åŠ è½½ Spring-config.xml å³å¯, web.xml å†™å¥½ä¹‹å, åŸºæœ¬ä¸éœ€è¦ä¿®æ”¹, æ‰€æœ‰é…ç½®å…³ç³»å…¨éƒ¨åœ¨ Spring-config.xml ä¸­ç®¡ç†.

é‚£ä¹ˆé—®é¢˜æ¥äº†
**dubbo çš„ consumer é…ç½®åœ¨å“ªé‡Œå‘¢?** 

æ‰¾äº†åŠå¤©, åŸæ¥åœ¨ funclib æ¨¡å—çš„ `applicationContext-mainflowfunc.xml` é…ç½®ä¸­...

![1B05F3A1-A94C-423D-84EC-BD37A9BE588D](http://qiniu.dong4j.info/2019-07-03-1B05F3A1-A94C-423D-84EC-BD37A9BE588D.png)

é‚£ä¹ˆé—®é¢˜åˆæ¥äº†

å¦‚æœ migu-game ç”±åˆè‚¥çš„åŒäº‹å¼€å‘, éœ€è¦å¢åŠ å‡ ä¸ªæ¥å£, ä½¿ç”¨ migu-game æœåŠ¡çš„æ˜¯æˆéƒ½çš„å°æ˜åŒå­¦, æ­£åœ¨å¼€å‘ funclib, è¿™ä¸ªæ—¶å€™è¯·é—®....

**å°æ˜ä¸­åˆåƒäº†å•¥?**

![-w278](http://qiniu.dong4j.info/2019-07-03-30DC9C5B-919D-4DBE-82A0-90372A0380C0.png)

> å¦‚æœ dubbo consumer é…ç½®ç”± funclib ç»´æŠ¤, é‚£ä¹ˆå°±è¦ä¿®æ”¹ funclib æ¨¡å—çš„é…ç½®;
> å¦‚æœ dubbo consumer é…ç½®ç”± migu-game ç»´æŠ¤, åˆè‚¥çš„åŒäº‹åªéœ€è¦æä¾› migu-game-interface, funclib åªéœ€å¼•å…¥ `dubbo-consumer-migugame.xml`;


`æœåŠ¡å-interface` è¿˜åº”è¯¥ä¾èµ– `dubbo` ç›¸å…³ jar ä¾èµ–, è¿™æ · consumer å°±ä¸éœ€è¦è‡ªå·±å¼•å…¥ `dubbo` ç›¸å…³ä¾èµ–äº†;

æœåŠ¡è¡Œä¸šå˜›, è¦åšå°±åšå…¨å¥—

**æœ€ä½³å®è·µ**

ä¸ªäººè®¤ä¸º, ä¸€ä¸ª `mservice` æœ€å¥½åˆ†ä¸º 3 å±‚;

1. interface å±‚;
2. service å±‚;
3. dao å±‚;

interface å·²ç»è¯´è¿‡äº†;
service å±‚, ä½œä¸ºä¸šåŠ¡å±‚, ä¾èµ–äº dao å±‚å’Œ interface å±‚;

å„å±‚çš„ pom ä¸­åªä¾èµ–æ¯å±‚éœ€è¦çš„ jar ä¾èµ–. æ¯”å¦‚ duubo çš„ä¾èµ– `åº”è¯¥` å†™åœ¨ interface å±‚, `mybatis` å’Œæ•°æ®åº“é©±åŠ¨ä¾èµ– `åº”è¯¥` å†™åœ¨ dao å±‚, è€Œ service å±‚ä¾èµ–ä¸šåŠ¡ç›¸å…³çš„ jar.

è¿™æ ·å°†æ‰€æœ‰ä¾èµ–ä¸‹æ”¾åˆ°ä¸åŒå±‚ä¸­, ä»¥ä¸€ç§æ’ä»¶åŒ–çš„æ–¹å¼æä¾›æœåŠ¡, å¯¼å…¥æŸå±‚ä¾èµ–, è¿å¸¦å¼•å…¥äº†è¿™å±‚éœ€è¦çš„ä¾èµ–. è¿™æ · jar ä¾èµ–å…³ç³»æ˜ç¡®, ä¹Ÿå¾ˆå¥½ç®¡ç†. 

`musicsearch-project` çš„æ€æƒ³å°±æ˜¯è¿™æ ·, ä»¥ `åˆ†è€Œæ²»ä¹‹` çš„æ–¹å¼ç®¡ç†ä»£ç å’Œä¾èµ–å…³ç³», ä¹Ÿå°±æ˜¯ä¸ªè§£è€¦çš„æ€æƒ³.
è€Œä¸æ˜¯å°†æ‰€æœ‰ä¾èµ–å…¨éƒ¨æ‰”åˆ° common æˆ–è€… service ä¸­, æ–¹ä¾¿æ˜¯æ–¹ä¾¿, ç»´æŠ¤èµ·æ¥æƒ³æ­»çš„å¿ƒéƒ½æœ‰äº†.


interface æ¨¡å—, å°±æ˜¯ä¸€ä¸ªæä¾›ç»™ consumer çš„è¯´æ˜, å‘Šè¯‰ consumer, æˆ‘è¿™ä¸ª interface æä¾›äº†å“ªäº›åŠŸèƒ½, æ²¡æœ‰å…·ä½“å®ç°.

è€Œ API å…¨ç§° Application Program Interface, å³åº”ç”¨ç¨‹åºæ¥å£, æ˜¯ä¸€ç»„å®šä¹‰,ç¨‹åºåŠåè®®çš„é›†åˆ.
å› æ­¤æˆ‘å°† æœåŠ¡å-api ç”¨äºå‘å¤–æä¾› rest api çš„æ¨¡å—.

ç›¸å…³çš„åŒ…åä¹Ÿæ˜¯å¦‚æ­¤.

### åŒ…å

> æ‰€æœ‰åŒ…å `å¿…é¡»` ä»¥ `com.iflytek.musicsearch` å¼€å§‹

å…¶ä»–è§„åˆ™:

- ç»„ä»¶æ¨¡å—: `com.iflytek.musicsearch.component.ç»„ä»¶å`
- å…¬å…±ç±»åº“: `com.iflytek.musicsearch.common`
- æœåŠ¡æ¨¡å—: `com.iflytek.musicsearch.æœåŠ¡å`

`æ¨è` å‡ ä¸ªå¸¸ç”¨çš„åŒ…å

- `config` ç”¨æ¥æ”¾é…ç½®ç±»
- `util` å·¥å…·ç±»åŒ…
- `enums` æšä¸¾ç±»åŒ…
- `constant` å¸¸é‡ç±»åŒ… (`æ¨è` å°†å¸¸é‡æŒ‰ç±»åˆ«å®šä¹‰åœ¨ä¸åŒçš„å¸¸é‡ç±»ä¸­)
- `service` service æ¥å£åŒ…
- `service.impl` service æ¥å£å®ç°ç±»åŒ…
- `dao` dao æ¥å£åŒ…
- `interfaces` ç‰¹æŒ‡ provider æä¾›çš„æ¥å£ç±»
- `api` ç‰¹æŒ‡ rest api

### ç±»å

ç±»å `å¿…é¡»` ä½¿ç”¨ UpperCamelCase é£æ ¼(é¦–å­—æ¯éƒ½å¤§å†™), å¿…é¡»éµä»é©¼å³°å½¢å¼. ä¾‹å¦‚: StringUtils

> æŠ½è±¡ç±»å‘½å `å¿…é¡»` ä½¿ç”¨ Abstract æˆ– Base å¼€å¤´;
> å¼‚å¸¸ç±»å‘½å `å¿…é¡»` ä½¿ç”¨ Exception ç»“å°¾;
> æµ‹è¯•ç±»å‘½å `å¿…é¡»` ä»¥å®ƒè¦æµ‹è¯•çš„ç±»çš„åç§°å¼€å§‹, ä»¥ Test ç»“å°¾;
> æ¥å£å®ç°ç±» `å¿…é¡»` ä»¥ Impl ç»“å°¾;
> API æ¥å£ç±»å¿…é¡»ä»¥ `Controller` ç»“å°¾;
> ORMæ¥å£å¿…é¡»ä»¥ `Dao` ç»“å°¾;    

### æ–¹æ³•å

Dao æ¥å£å `æ¨è` ä½¿ç”¨ä»¥ä¸‹å‘½åæ–¹å¼

æ–°å¢:

- add(Entity entity)
- insert(Entity entity)
- save(Entity entity)

æŸ¥è¯¢:

- get(Long id)
- getByXxx
- findByXxx
- selectByXxx

æ›´æ–°:

- update(Entity entity)
- updateByXxx

åˆ é™¤:

- delete(Long id)
- deleteByXxx

### å±æ€§å

è¿™ä¸ªæ²¡ä»€ä¹ˆå¥½è¯´çš„, æŒ‰ç…§ Java æ¨èå‘½åæ–¹å¼å³å¯. 

> å¸¸é‡å‘½å `å¿…é¡»` å…¨éƒ¨å¤§å†™, å•è¯é—´ç”¨ä¸‹åˆ’çº¿åˆ†éš”;

## æ•°æ®åº“è§„èŒƒ

æ¨è 3 ç¯‡æ–‡ç« , è™½ç„¶æ˜¯ mysql çš„, ä½†æ˜¯éƒ½æ˜¯æ•°æ®åº“å•Š

[èµ¶é›† mysql å†›è§„](https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651960775&idx=1&sn=1a9c9f4b94dfe71ad2528fb2c84f5ec7&chksm=bd2d001b8a5a890d302d139ea42e9ffde44407738a618865934e40b8e35486b13cafca2933f6&mpshare=1&scene=1&srcid=1228MzgFw9KLVzaHtjHvpb2p%23rd)
[58åˆ°å®¶æ•°æ®åº“30æ¡å†›è§„è§£è¯»](https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651959906&idx=1&sn=2cbdc66cfb5b53cf4327a1e0d18d9b4a&chksm=bd2d07be8a5a8ea86dc3c04eced3f411ee5ec207f73d317245e1fefea1628feb037ad71531bc&scene=21#wechat_redirect)
[å†è®®æ•°æ®åº“å†›è§„](https://mp.weixin.qq.com/s?__biz=MjM5ODYxMDA5OQ==&mid=2651959910&idx=1&sn=6b6853b70dbbe6d689a12a4a60b84d8b&chksm=bd2d07ba8a5a8eac6783bac951dba345d865d875538755fe665a5daaf142efe670e2c02b7c71&scene=21#wechat_redirect)

## é…ç½®è§„èŒƒ

ä¸ºäº†è§£å†³å¼€å‘, æµ‹è¯•, ç°ç½‘éƒ¨ç½²æ—¶æ‰‹åŠ¨å¯¹æ¯”é…ç½®, æ‰‹åŠ¨åˆ‡æ¢é…ç½®, å‡å°‘äººå·¥ä»‹å…¥å‡ºé”™çš„å‡ ç‡, èŠ‚çº¦æ—¶é—´ç­‰é—®é¢˜, `musicsearch-project` é‡‡ç”¨å¤šç¯å¢ƒé…ç½®.
ä¸€æ¬¡æ‰“åŒ…,å¯éƒ¨ç½²åˆ°å¤šä¸ªç¯å¢ƒ.

æ„æ€å°±æ˜¯: ä¸€æ¬¡æ‰“åŒ…, åˆ°å¤„è¿è¡Œ.

### é…ç½®åˆ†ç±»

**ä»æ•°æ®æ¥æºå¯åˆ†ä¸º:**

- æ•°æ®åº“
- NoSQL
- æ–‡ä»¶
- ç½‘ç»œ

**ä»åŠ è½½é¡ºåºä¸Šè¯¾åˆ†ä¸º:**

- å¯åŠ¨æ—¶åŠ è½½çš„é…ç½®
    - dataSource è¿æ¥é…ç½®
    - Redis è¿æ¥é…ç½®
    - MQ è¿æ¥é…ç½®
    - æ—¥å¿—é…ç½®
    - ...
- è¿è¡ŒæœŸé—´åŠ¨æ€è·å–
    - å­—å…¸æ•°æ®

å…¶å®æœ€å®¹æ˜“å‡ºé”™çš„ä¸”å½±å“æœ€å¤§çš„å°±æ˜¯è¿è¡ŒæœŸé—´åŠ¨æ€è·å–çš„é…ç½®, å­—å…¸æ•°æ®æ”¹é”™äº†å°±ä¼šå½±å“ç°ç½‘ä¸šåŠ¡, è€Œä¸”ä¸å¥½æ’æŸ¥.
è¿æ¥é…ç½®å¯åŠ¨æ—¶å°±éœ€è¦, å¦‚æœé”™è¯¯å¯èƒ½ä¼šå¯¼è‡´å¯åŠ¨å¤±è´¥, è¿™ç±»é—®é¢˜æ¯”è¾ƒå®¹æ˜“æ’æŸ¥.

### local ç¯å¢ƒ

ä»¥å‰åœ¨å¼€å‘æ—¶, ä½¿ç”¨çš„ dev ç¯å¢ƒ. å¯èƒ½ä¼šå°†æŸå‡ ä¸ªé…ç½®ä¿®æ”¹æˆæœ¬åœ°ç¯å¢ƒæˆ–è€… test ç¯å¢ƒè¿›è¡Œå¼€å‘, å¼€å‘å®Œæˆå, åˆ`éœ€è¦é€ä¸ªæ”¹å›æ¥`;
æ”¹åŠ¨çš„é…ç½®å¤ªå¤š, éƒ¨åˆ†é…ç½®`å¿˜è®°æ”¹å›æ¥`è¿˜æäº¤äº†, æ‚²å‰§äº†;

local ç¯å¢ƒä¸“é—¨è§£å†³ä»¥ä¸Šé—®é¢˜.
æœ€åˆæ˜¯ä¸€ä¸ªç©ºé…ç½®, æˆ‘ä»¬æ‹‰å–ä»£ç åæ ¹æ®è‡ªå·±çš„ç¯å¢ƒä¿®æ”¹ local é…ç½®, ç„¶åä½¿ç”¨ idea `å¿½ç•¥æäº¤`åŠŸèƒ½, å¿½ç•¥æ­¤æ–‡ä»¶.
æ¯ä¸ªå¼€å‘è€…äº’ä¸å½±å“, å¼€å‘æ—¶åªéœ€è¦ä¿®æ”¹ local ç¯å¢ƒå³å¯, `ä¸è¯¥` ç›´æ¥ä¿®æ”¹å…¶ä»–ç¯å¢ƒé…ç½®, é¿å…ç¯å¢ƒé—®é¢˜é€ æˆçº¿ä¸Šé—®é¢˜ 

### dev ç¯å¢ƒ

ç°åœ¨çš„æœåŠ¡å¤ªå¤š, æˆ‘ä»¬å¼€å‘æ—¶ä¸å¯èƒ½æ¯ä¸ªéƒ½å¯åŠ¨èµ·æ¥, è¿™æ—¶æˆ‘ä»¬å¯ä»¥å°†ä¸€äº›å…¬å…±çš„æœåŠ¡éƒ¨ç½²åˆ° dev æœåŠ¡å™¨, è¿™ä¸ªé…ç½®å°±æ˜¯ dev ç¯å¢ƒçš„é…ç½®äº†, ä¸€æ—¦é…ç½®å¥½, `ä¸è¯¥` è½»æ˜“ä¿®æ”¹.

### test ç¯å¢ƒ

å’Œ dev ç¯å¢ƒå·®ä¸å¤š, åªæ˜¯ä¸€äº›è¿æ¥é…ç½®ä¸ä¸€æ ·, `ä¸è¯¥` è½»æ˜“ä¿®æ”¹.

### prod ç¯å¢ƒ

ç”Ÿäº§ç¯å¢ƒç»å¸¸æ”¹åŠ¨çš„å°±æ˜¯å­—å…¸æ•°æ®, ç°åœ¨çš„å­—æ®µæ•°æ®å¤ªå¤æ‚äº†.

æœ€å¥½çš„æ–¹å¼æ˜¯é€šè¿‡ kv é”®å€¼å¯¹, value åªæ˜¯ç®€å•çš„å­—ç¬¦ä¸²è€Œå·², ä¸è¦æ˜¯ä¸€ä¸ªå¤æ‚çš„ json, è¿™æ ·èƒ½éå¸¸å‹å¥½çš„ç®¡ç†æ‰€æœ‰é…ç½®, ä¿®æ”¹é…ç½®ä¹Ÿä¸å®¹æ˜“å‡ºé”™.

redis æ„å»ºå·¥å…·æˆ‘äº†è§£å½“çš„ä¸€ä¸ªä½œç”¨æ˜¯ä¸ºäº†é˜²æ­¢ä¿®æ”¹å‡ºé”™, åšäº†ä¸€ä¸ªä¿æŠ¤æªæ–½.
å…ˆä¿å­˜åˆ°æ•°æ®åº“ä¸­, æ£€æŸ¥ä¸€ä¸‹, ç¡®ä¿æ²¡å‡ºé”™åä½¿ç”¨æ„å»ºå·¥å…·åŒæ­¥åˆ° redis.

å¦‚æœæ˜¯è¿™ä¸ªåŸå› çš„è¯, æˆ‘æƒ³èƒ½ä¸èƒ½ä½¿ç”¨ä¸€ä¸ªå¼¹å‡ºæ¡†æ˜¾ç¤ºä¿®æ”¹å‰ä¸ä¿®æ”¹åçš„å€¼, ç„¶åäºŒæ¬¡ç¡®è®¤?
ç¡®è®¤åä¿®æ”¹æ•°æ®åº“, åŒæ—¶æ›´æ–° redis.

è·å–åŠ¨æ€æ•°æ®çš„æ–¹å¼:

é¦–å…ˆä» redis ä¸­è·å–, å¦‚æœæ²¡æœ‰åˆ™ä»æ•°æ®åº“ä¸­è·å–, ç„¶åæ›´æ–°åˆ° redis;
å¦‚æœæœ‰åˆ™ç›´æ¥è¿”å›.

åå°ç³»ç»Ÿä¿®æ”¹å­—å…¸æ•°æ®ä¸”äºŒæ¬¡ç¡®è®¤å, æ›´æ–°æ•°æ®åº“å’Œ redis.

è¿™é‡Œæœ‰ä¸€ä¸ªäº‹åŠ¡é—®é¢˜.
æ¯”å¦‚åå°ç³»ç»Ÿä¿®æ”¹å®Œå­—æ®µæ•°æ®å,æ›´æ–°æ•°æ®åº“æˆåŠŸ, ä½†æ˜¯æ›´æ–° redis å¤±è´¥, è¿™ä¸ªæ—¶å€™ redis ä¸­å°±æ˜¯æ—§æ•°æ®. 

**è§£å†³æ–¹æ¡ˆ:**

1. åå°ç³»ç»ŸäºŒæ¬¡ç¡®è®¤ä¿®æ”¹;
2. æ›´æ–°æ•°æ®åº“;
3. å°† redis ç›¸åº”çš„ key è®¾ç½®ä¸ºå¤±æ•ˆ; 

**åˆ†æ:**

1. ç¬¬ 2 æ­¥å¤±è´¥, ç›´æ¥è¿”å›ä¿®æ”¹å¤±è´¥, ä¸ä¼šå‘ç”Ÿäº‹åŠ¡é—®é¢˜, æ•°æ®ä¹Ÿä¸ä¼šè¢«ä¿®æ”¹;
2. ç¬¬ 2 æ­¥æˆåŠŸ, ç¬¬ 3 æ­¥å¤±è´¥;
    1. æ­¤æ—¶åº”ç”¨æŸ¥è¯¢å­—å…¸æ•°æ®æ—¶, redis ä¸ºæ—§æ•°æ®(å¯ä»¥ä½¿ç”¨é‡è¯•æ¥è§£å†³)
3. ç¬¬ 2 æ­¥æˆåŠŸ, ç¬¬ 3 æ­¥æˆåŠŸ;
    1. æ­¤æ—¶åº”ç”¨æŸ¥è¯¢å­—å…¸æ•°æ®æ—¶, redis æ²¡æœ‰, åˆ™å»æ•°æ®åº“ä¸­æŸ¥è¯¢æœ€æ–°, ç„¶åå†æ›´æ–°åˆ° redis ä¸­.

### Dubbo é…ç½®æ–‡ä»¶

> æ¶ˆè´¹è€…é…ç½®æ–‡ä»¶å `å¿…é¡»` ä»¥ `dubbo-consumer-æœåŠ¡å.xml` å‘½å.
> æœåŠ¡æä¾›è€…é…ç½®æ–‡ä»¶å `å¿…é¡»` ä»¥ `dubbo-provider-æœåŠ¡å.xml` å‘½å.

é…ç½®ååŒºåˆ†æ¶ˆè´¹è€…å’Œç”Ÿäº§è€…, è¿™æ ·èŒè´£æ˜ç¡®, æ–¹ä¾¿æœç´¢æŸ¥çœ‹. æœ€æ“è›‹çš„æ˜¯æœç´¢å‡ºå‡ åä¸ª dubbo.xml é…ç½®, è¿˜å¾—ä¸€ä¸ªä¸ªç‚¹è¿›å…¥çœ‹æ˜¯æ¶ˆè´¹è€…è¿˜æ˜¯ç”Ÿäº§è€…é…ç½®.

> æ¶ˆè´¹è€…é…ç½® `å¿…é¡»` å•ç‹¬å†™åœ¨ `dubbo-consumer-æœåŠ¡å.xml` ä¸­, ä¸è¦å†™åœ¨  Spring é…ç½®ä¸­.

é…ç½®å°½é‡åˆ†å¼€åˆ°ä¸åŒåˆ°é…ç½®æ–‡ä»¶ä¸­, æœ€åä½¿ç”¨ import èšåˆèµ·æ¥. éœ€è¦ä¿®æ”¹é…ç½®æ—¶, èƒ½æ˜ç¡®çŸ¥é“å»å“ªä¸ªé…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹.
ä½ è§ `è‘µèŠ±å®å…¸` é‡Œé¢å†™äº†æ€ä¹ˆè‡ªå®«çš„è¯¦ç»†æ•™ç¨‹å—? æœ€å¤šä¹Ÿå°±å¼•ç”¨ä¸€ä¸‹, `æ¬²ç»ƒæ­¤åŠŸ, å¿…å…ˆè‡ªå®«`.

> å¼•å…¥é…ç½®ä¸è¦å†™åœ¨ web.xml, `å¿…é¡»` ä½¿ç”¨ import åœ¨ Spring ä¸»é…ç½®æ–‡ä»¶ä¸­å¼•å…¥.

`musicsearch-project` ä¸éœ€è¦æ‹…å¿ƒè¿™ä¸ªé—®é¢˜, å› ä¸º web.xml å·²ç»è¢«å¹²æ‰äº† ğŸ¤£

### Spring é…ç½®æ–‡ä»¶

- SpringMVC é…ç½®æ–‡ä»¶ç»Ÿä¸€å‘½å: `spring-mvc.xml`
- Web åº”ç”¨çš„ Spring é…ç½®æ–‡ä»¶ç»Ÿä¸€å‘½å: `spring-context.xml`
- å…¶ä»–ç»„ä»¶çš„ Spring é…ç½®æ–‡ä»¶ç»Ÿä¸€å‘½å: æ¨¡å—å.xml
- Spring Boot åº”ç”¨çš„é…ç½®æ–‡ä»¶ç»Ÿä¸€ä½¿ç”¨ application.properties

`musicsearch-project` ä½¿ç”¨ Spring Boot ä¸ºåŸºç¡€æ¡†æ¶, å› æ­¤ `spring-mvc.xml` å’Œ `spring-context.xml` å·²ç»ä½¿ç”¨ Java Config çš„æ–¹å¼ä»£æ›¿.

**è‡ªåŠ¨é…ç½®ç±» `å¿…é¡»` ä»¥ æœåŠ¡å+Configuration æ–¹å¼å‘½å**
**å¯åŠ¨ç±» `å¿…é¡»` ä»¥ æœåŠ¡å+Application æ–¹å¼å‘½å**
**å•å…ƒæµ‹è¯•ä¸»ç±» `å¿…é¡»` ä»¥ æœåŠ¡å+ApplicationTest æ–¹å¼å‘½å**

## Maven

åŸæ¥çš„é¡¹ç›®æ˜¯ç”±å¤šä¸ªæ¨¡å—ç”±ä¸åŒçš„ Maven ç®¡ç†, é€ æˆç¼–è¯‘,æ‰“åŒ…,debug éº»çƒ¦, ä¾èµ–å…³ç³»å¤æ‚, ç‰ˆæœ¬éšæ„, åŒä¸€ä¸ªæ¨¡å—å¤šä¸ªä¸åŒç‰ˆæœ¬, ç»´æŠ¤å›°éš¾.

ä¸ºäº†è§£å†³ä»¥ä¸Šé—®é¢˜, ç°åœ¨å°†æ‰€æœ‰æ¨¡å—é€šè¿‡ä¸€ä¸ª ä¸» pom è¿›è¡Œç®¡ç†, æ‰€æœ‰æ¨¡å—å…¨éƒ¨åœ¨ `musicsearch-porject` ç›®å½•ä¸‹.

ä¼˜ç‚¹å¦‚ä¸‹:

- debug æ—¶æ–¹ä¾¿, æƒ³åœ¨å“ªå„¿æ‰“æ–­ç‚¹å°±åœ¨å“ªå„¿æ‰“æ–­ç‚¹. éšå¤„ debug;
- èƒ½å€ŸåŠ© IDEA è¿›è¡Œå…¨å±€é‡æ„;
- jar ç‰ˆæœ¬ç»Ÿä¸€ç®¡ç†
- ç»å¯¹ä¸ä¼šå‡ºç°ç›¸åŒ jar å¤šä¸ªç›¸åŒç‰ˆæœ¬çš„é—®é¢˜.

### pom è§„èŒƒ

> groupId `å¿…é¡»` ä¸º `com.iflytek`
> artifactId `å¿…é¡»` ä¸ æ¨¡å—åç›¸åŒ
> version `å¿…é¡»` ä¸ çˆ¶ pom version ç›¸åŒ
> `å¿…é¡»` æ˜¾å¼æŒ‡å®š `packaging`

å¦‚æœæ²¡æœ‰è®¾ç½® packaging æ ‡ç­¾, é»˜è®¤æ‰“åŒ…ä¸º jar æ ¼å¼, è¿™é‡Œ `å¿…é¡»` è®¾ç½®æ­¤æ ‡ç­¾, æ˜ç¡®æŒ‡å®šæ‰“åŒ…æ ¼å¼.

> `å¿…é¡»` å†™ `description` æ ‡ç­¾

ä¸ºæ­¤ pom æ·»åŠ å¿…è¦çš„æè¿°ä¿¡æ¯

> ç¬¬ä¸‰æ–¹ä¾èµ– `å¿…é¡»` æ·»åŠ åˆ° `musicsearch-dependencies` pom ä¸­;
> å¦‚æœ Maven ä¸­å¤®ä»“åº“æ²¡æœ‰çš„ jar åŒ…, ä»ç½‘ä¸Šä¸‹è½½å, `å¿…é¡»` ä¸Šä¼ åˆ°å…¬å¸çš„ Maven, ä¸èƒ½ç›´æ¥ä½¿ç”¨ jar åŒ…

1. æœç´¢ Maven ä¸­å¤®ä»“åº“, å…³é”®å­— + maven;
2. æœç´¢ä¸åˆ°åˆ™æ‰¾åˆ° jar ä¸Šä¼ åˆ°å…¬å¸ Maven ä»“åº“
    
```
# å®‰è£…åˆ°ç§æœ 
# DgroupIdå’ŒDartifactIdæ„æˆäº†è¯¥jaråŒ…åœ¨pom.xmlçš„åæ ‡, é¡¹ç›®å°±æ˜¯ä¾é è¿™ä¸¤ä¸ªå±æ€§å®šä½. è‡ªå·±èµ·åå­—ä¹Ÿè¡Œ.  
# Dfileè¡¨ç¤ºéœ€è¦ä¸Šä¼ çš„jaråŒ…çš„ç»å¯¹è·¯å¾„.  
# Durlç§æœä¸Šä»“åº“çš„ä½ç½®, æ‰“å¼€nexusâ€”â€”>repositoriesèœå•, å¯ä»¥çœ‹åˆ°è¯¥è·¯å¾„.  
# DrepositoryIdæœåŠ¡å™¨çš„è¡¨ç¤ºid, åœ¨nexusçš„configurationå¯ä»¥çœ‹åˆ°.  è¦ä¸ setting.xml ä¸­çš„æƒé™ id ä¸€è‡´
# Dversionè¡¨ç¤ºç‰ˆæœ¬ä¿¡æ¯
mvn deploy:deploy-file -DgroupId=com.xxx -DartifactId=yyy -Dversion=x.x.x -Dpackaging=jar -Dfile=jar-path -Durl=ä¸Šä¼ åœ°å€ -DrepositoryId=thirdparty 
```

ç¬¬ä¸‰æ–¹ä¾èµ– `å¿…é¡»` å°†ç‰ˆæœ¬è¿å…¥ `musicsearch-dependencies` åˆ° properties æ ‡ç­¾ä¸‹;
version `å¿…é¡»` ä»¥ `artifactId.version` çš„æ–¹å¼å‘½å;

```xml
<properties>
    ...
    <socket.io-client.version>1.0.0</socket.io-client.version>
</properties>
<dependencyManagement>
    <dependencies>
        ...
        <dependency>
            <groupId>io.socket</groupId>
            <artifactId>socket.io-client</artifactId>
            <version>${socket.io-client.version}</version>
        </dependency>
    </dependencies>
</dependencyManagement>
```    

ç”±äº `musicsearch-project` ä½¿ç”¨ Spring Boot å¼€å‘, ç‰ˆæœ¬ä¸º 1.5.8.RELEASE.
Spring Boot æ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰ä¸€ä¸ª `spring-boot-dependencies` é¡¹ç›®ç”¨æ¥ç»´æŠ¤æ‰€æœ‰ç¬¬ä¸‰æ–¹ jar ç‰ˆæœ¬å’Œ Maven æ’ä»¶ç‰ˆæœ¬.

![-w1087](http://qiniu.dong4j.info/2019-07-03-15330921723159.jpg)

æˆ‘ä»¬ç›´æ¥ä½¿ç”¨ `spring-boot-dependencies` ä¸­ç›¸å…³ä¾èµ–çš„ç‰ˆæœ¬, èƒ½æœ‰æ•ˆå‡å°‘ç‰ˆæœ¬å†²çª.

> å¦‚æœæˆ‘ä»¬æ–°å¢çš„ç¬¬ä¸‰æ–¹åŒ…å·²ç»åœ¨ `spring-boot-dependencies` å£°æ˜, åˆ™ `å¿…é¡»` ä½¿ç”¨ `spring-boot-dependencies` è§„å®šçš„ç‰ˆæœ¬, å³åˆ é™¤ version æ ‡ç­¾.

æ€ä¹ˆæŸ¥çœ‹æ–°å¼•å…¥çš„ä¾èµ–æ˜¯å¦åœ¨ `spring-boot-dependencies` è¢«å£°æ˜äº†å‘¢, å¾ˆç®€å•

æ¯”å¦‚æˆ‘éœ€è¦æ·»åŠ å¦‚ä¸‹ä¾èµ–åˆ°æ¨¡å—ä¸­

```xml
<dependency>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
    <version>1.16.14</version>
</dependency>
```

æ•´ä¸ªæ“ä½œå¦‚ä¸‹å›¾æ‰€ç¤º:

![2018-08-01 11.03.20](http://qiniu.dong4j.info/2019-07-03-2018-08-01%2011.03.20.gif)

æˆ‘ä»¬æ–°å¢çš„ lombok ç‰ˆæœ¬ä¸º 1.16.14
ä½†æ˜¯å½“åŠ å…¥ pom ä¹‹å, å·¦è¾¹å‡ºç°äº†ä¸€ä¸ªå‘ä¸Šçš„ç®­å¤´, ç‚¹è¿‡å»ä¹‹å, å‘ç°æ­¤ä¾èµ–å·²ç»åœ¨ `spring-boot-dependencies` è¢«å£°æ˜äº†, å¹¶ä¸”ç‰ˆæœ¬ä¸º 1.16.18, å› æ­¤åˆ é™¤ version å°±å¯ä»¥äº†.

**æ·»åŠ æ–°ä¾èµ–çš„æ­¥éª¤:**

1. é€‰æ‹©åˆé€‚çš„æ¨¡å—, ç›´æ¥ç²˜è´´ maven ä¾èµ–é…ç½®åˆ° pom ä¸­,
2. å¦‚æœå·¦è¾¹å‡ºç°äº†å‘ä¸Šçš„ç®­å¤´, åˆ™åˆ é™¤ version æ ‡ç­¾, æå®š;
3. å¦‚æœæ²¡æœ‰, åˆ™å°†æ­¤ä¾èµ–é…ç½®ç²˜è´´åˆ° `musicsearch-dependencies` ä¸­, å°† version æ·»åŠ åˆ° properties æ ‡ç­¾ä¸­;
4. æœ€ååˆ é™¤æœ€å¼€å§‹é‚£ä¸ªé…ç½®çš„ version;

`spring-boot-dependencies` ä¸å¯èƒ½å®šä¹‰åˆ°æ‰€æœ‰çš„ä¾èµ–, å› æ­¤è¿™é‡Œå°±æœ‰äº† `musicsearch-dependencies` è¿™ä¸ªæ¨¡å—, ç”¨æ¥ç®¡ç†é¡¹ç›®éœ€è¦ä½†æ˜¯æ²¡æœ‰åœ¨ `spring-boot-dependencies` ä¸­å®šä¹‰çš„ jar ä¾èµ–.

## æ—¥å¿—è§„èŒƒ

> `æ¨è` ä½¿ç”¨ `@Slf4j` è·å– `log` å®ä¾‹

ä½¿ç”¨ `lombok` æ’ä»¶, ç›´æ¥ä½¿ç”¨ @Slf4j ä»£æ›¿è·å– log å®ä¾‹çš„å†—ä½™ä»£ç .

```java
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

...
private static final Logger log = LoggerFactory.getLogger(Xxx.class);
```

> `å¿…é¡»` ä½¿ç”¨ `log4j2` æ—¥å¿—æ¡†æ¶

ç»Ÿä¸€ä½¿ç”¨æ•ˆç‡æ›´é«˜çš„ log4j2 æ—¥å¿—æ¡†æ¶

> æ—¥å¿—è¾“å‡ºåˆ°æ–‡ä»¶çš„ç¼–ç  `å¿…é¡»` ä¸º UTF-8

### æ—¥å¿—é…ç½®å

> Web åº”ç”¨æˆ–è€…é€šè¿‡ JVM è¿›ç¨‹æä¾›æœåŠ¡çš„åº”ç”¨, `å¿…é¡»` ä½¿ç”¨ `log4j2-spring.xml` å‘½å

Spring Boot å®˜æ–¹æ¨èä¼˜å…ˆä½¿ç”¨å¸¦æœ‰ -spring çš„æ–‡ä»¶åä½œä¸ºæ—¥å¿—é…ç½®ï¼ˆå¦‚ä½¿ç”¨ log4j2-spring.xml, è€Œä¸æ˜¯ log4j2.xmlï¼‰

åŸç†å¯ä»¥æŸ¥çœ‹ 

`Log4J2LoggingSystem.getCurrentlySupportedConfigLocations()`
`AbstractLoggingSystem.getSpringConfigLocations()`

### è¾“å‡ºæ ·å¼

```
env: %d{yyyy.MM.dd HH:mm:ss.SSS} [%5p] ${sys:PID} -- [%15.15t] %-40.40c{1.} : %m%n%xwEx
```

è¾“å‡ºå†…å®¹å…ƒç´ å…·ä½“å¦‚ä¸‹: 

* ç¯å¢ƒå
* æ—¶é—´æ—¥æœŸ â€” ç²¾ç¡®åˆ°æ¯«ç§’
* æ—¥å¿—çº§åˆ« â€” ERROR, WARN, INFO, DEBUG or TRACE
* è¿›ç¨‹ID
* åˆ†éš”ç¬¦ â€”Â `--`Â æ ‡è¯†å®é™…æ—¥å¿—çš„å¼€å§‹
* çº¿ç¨‹å â€” æ–¹æ‹¬å·æ‹¬èµ·æ¥ï¼ˆå¯èƒ½ä¼šæˆªæ–­æ§åˆ¶å°è¾“å‡ºï¼‰
* Loggerå â€” é€šå¸¸ä½¿ç”¨æºä»£ç çš„ç±»å
* æ—¥å¿—å†…å®¹

æ•ˆæœ :

```
dev: 2018.08.01 15:02:25.153  INFO 75012 -- [  restartedMain] c.i.m.m.MeetingApplication : Starting MeetingApplication on dong4j with PID 75012 (/Users/codeai/Develop/work/ifly/musicsearch-project/musicsearch-business/service-meeting/target/classes started by codeai in /Users/codeai/Develop/work/ifly/musicsearch-project)
dev: 2018.08.01 15:02:25.154 DEBUG 75012 -- [  restartedMain] c.i.m.m.MeetingApplication : Running with Spring Boot v1.5.8.RELEASE, Spring v4.3.12.RELEASE
dev: 2018.08.01 15:02:25.155  INFO 75012 -- [  restartedMain] c.i.m.m.MeetingApplication : The following profiles are active: oracle
```

### æ—¥å¿—ä¿å­˜è·¯å¾„

æ—¥å¿—è·¯å¾„ç»Ÿä¸€ç®¡ç†, ç¡®ä¿æ¯å°æœåŠ¡å™¨ä¸Šçš„æ—¥å¿—éƒ½åœ¨åŒä¸€ç›®å½•ä¸‹

```
<property name="LOG_BASE_FOLDER">/path/to/logs/${APP_NAME}</property>
```

`/path/to/logs/` å†è®®, åªè¦æ˜¯ä¸€ä¸ªæœ‰è¯»å†™æƒé™çš„ç›®å½•ä¸”å¥½è®°å°±å¯ä»¥äº†, å…³é”®æ˜¯ä¿æŒç»Ÿä¸€.

> æœ€å `å¿…é¡»` é€šè¿‡ APP_NAME å‚æ•°åŒºåˆ†åº”ç”¨.

### æ—¥å¿—å½’æ¡£

> æ—¥å¿—æ–‡ä»¶ `å¿…é¡»` 1 å¤©å½’æ¡£ä¸€æ¬¡, å‹ç¼©æ–‡ä»¶ä¸Šé™ `å»ºè®®` ä¸º 200MB

æ¯å¤©å½’æ¡£æ—¥å¿—, æ–¹ä¾¿æŒ‰æ—¥å¿—æŸ¥è¯¢æ—¥å¿—

## å•å…ƒæµ‹è¯•è§„èŒƒ

> æ‰€æœ‰æ¨¡å—éƒ½ `å¿…é¡»` æœ‰å•å…ƒæµ‹è¯•, è€Œä¸æ˜¯ä½¿ç”¨ `main()` æ¥è¿›è¡Œæµ‹è¯•;

IDEA æ·»åŠ å•å…ƒæµ‹è¯•ç±»éå¸¸ç®€å•

![2018-07-31 00.15.33](http://qiniu.dong4j.info/2019-07-03-2018-07-31%2000.15.33.gif)

ç›´æ¥é€šè¿‡å¿«æ·é”®è‡ªåŠ¨ç”Ÿæˆå•å…ƒæµ‹è¯•ç±».

> é›†æˆæµ‹è¯•æ—¶, `å¿…é¡»` ç»§æ‰¿ä¸»æµ‹è¯•ç±»;

åœ¨æ¯ä¸ª Web æ¨¡å—ä¸­, éƒ½ä¼šæœ‰ä¸€ä¸ª XxxApplicationTest æµ‹è¯•çˆ¶ç±», ç”¨äºæ•´åˆé…ç½®ç±», æµ‹è¯•ç«¯å£éšæœºç­‰åŠŸèƒ½. 

![-w983](http://qiniu.dong4j.info/2019-07-03-15329680004537.jpg)


å…¶ä»–é›†æˆæµ‹è¯•ç±»åªéœ€è¦ç»§æ‰¿æ­¤çˆ¶ç±»å³å¯, ä¸éœ€è¦å†™é‡å¤çš„æ³¨è§£

![-w983](http://qiniu.dong4j.info/2019-07-03-15329681167623.jpg)

é»˜è®¤æ˜¯å•å…ƒæµ‹è¯• `å¿…é¡»` å…¨éƒ¨é€šè¿‡æ‰èƒ½æ‰“åŒ…, å½“å¾€å¾€ç”±äºå•å…ƒæµ‹è¯•ç¼–å†™ä¸è§„èŒƒé€ æˆæ‰“åŒ…å¤±è´¥, ç¼–å†™å¥½çš„å•å…ƒæµ‹è¯•éš¾åº¦ä¹Ÿéå¸¸å¤§, å› æ­¤è¿™é‡Œä¸å¼ºåˆ¶è¦æ±‚.

ä½¿ç”¨ 3 ç§æ–¹å¼å¿½ç•¥å•å…ƒæµ‹è¯•

**æ–¹å¼1:**

`æ¨è` è¿™ç§

ä½¿ç”¨å˜é‡

```xml
<properties>  
    <maven.test.skip>true</maven.test.skip>  
</properties>  
```

æˆ–è€…  

```xml
<properties>  
    <skipTests>true</skipTests>  
</properties>
```  

**æ–¹å¼2:**

ä½¿ç”¨ mvn å‘½ä»¤

```lua
mvn package -Dmaven.test.skip=true
```

**æ–¹å¼3:**

ä½¿ç”¨æ’ä»¶

```xml
<plugin>  
    <groupId>org.apache.maven.plugins</groupId>  
    <artifactId>maven-surefire-plugin</artifactId>  
    <version>${maven-surefire-plugin.version}</version>  
    <configuration>  
        <skipTests>true</skipTests>  
    </configuration>  
</plugin> 
```

æ–¹å¼1 ä¸æ–¹å¼2 çš„åŒºåˆ«åœ¨äº:

`skipTests` ä¸æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹, ä½†ç¼–è¯‘æµ‹è¯•ç”¨ä¾‹ç±»ç”Ÿæˆç›¸åº”çš„ class æ–‡ä»¶è‡³ target/test-classes ä¸‹
`maven.test.skip` ä¸ä½†è·³è¿‡å•å…ƒæµ‹è¯•çš„è¿è¡Œ, ä¹Ÿè·³è¿‡æµ‹è¯•ä»£ç çš„ç¼–è¯‘


