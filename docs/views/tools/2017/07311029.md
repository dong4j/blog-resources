---
title: htop 使用教程
date: 2017-17-31
categories:
  - Tools
tags: 
  - Tools
---

::: tip
[htop](http://hisham.hm/htop/) 是 Linux 系统中的一个互动的进程查看器，一个文本模式的应用程序 (在控制台或者 X 终端中)，需要 ncurses
:::

<!-- more -->

与 Linux 传统的 top 相比，htop 更加人性化。它可让用户交互式操作，支持颜色主题，可横向或纵向滚动浏览进程列表，并支持鼠标操作。

与 top 相比，htop 有以下优点：

- 可以横向或纵向滚动浏览进程列表，以便看到所有的进程和完整的命令行。
- 在启动上，比 top 更快。
- 杀进程时不需要输入进程号。
- htop 支持鼠标操作。
- top 已经很老了。

## 安装

```shell
brew install htop
```

htop 跟 top 一样，也是打开一个实时的监控界面，直接输入 htop 命令打开如下图所示界面：

![](http://qiniu.dong4j.info/X8rTDI.png)

在上图中将输出的界面划分成了四个区域，其中：
上左区：显示了 CPU、物理内存和交换分区的信息；
上右区：显示了任务数量、平均负载和连接运行时间等信息；
进程区域：显示出当前系统中的所有进程；
操作提示区：显示了当前界面中 F1-F10 功能键中定义的快捷功能。

F1：显示帮助信息；

![](http://qiniu.dong4j.info/EGPFU6.png)

F2：配置界面中的显示信息；

![](http://qiniu.dong4j.info/H4Gvfa.png)

我们可以根据自己的需要修改显式模式以及想要显示的内容，比如：以 LED 的形式显示 CPU 的使用情况，并且在左边的区域添加 hostname，在右边的区区域添加 clock；

自定义进程区域中的显示内容：

![](http://qiniu.dong4j.info/nKrdk1.png)

![](http://qiniu.dong4j.info/hjMC11.png)

F4：进程过滤器；
从上面的结果可以看出 search 和 filter 的区别：
search 会将光标定位到符合条件的进程上，通过 F3 键进行逐个查找；而 filter 会直接将符合条件的进程筛选出来。
search 和 filter 都使用 ESC 键来取消功能。


![](http://qiniu.dong4j.info/2019-07-02-15014682825908.png)

| 标识 | 作用 |
|:---|:---|
| PID：| 进行的标识号 |
| USER：| 运行此进程的用户 |
| PRI：| 进程的优先级 |
| NI：| 进程的优先级别值，默认的为 0，可以进行调整 |
| VIRT：| 进程占用的虚拟内存值 |
| RES：| 进程占用的物理内存值 |
| SHR：| 进程占用的共享内存值 |
| S：| 进程的运行状况，R 表示正在运行、S 表示休眠，等待唤醒、Z 表示僵死状态 |
| %CPU：| 该进程占用的 CPU 使用率 |
| %MEM：| 该进程占用的物理内存和总内存的百分比 |
| TIME+：| 该进程启动后占用的总的 CPU 时间 |
| COMMAND：| 进程启动的启动命令名称 |


|:快捷键1| 快捷键2 | 作用 |
|:----|:---|:---|
| h, ? | F1 |查看 htop 使用说明 |  |
| S | F2 | htop 设定 | |
| / | F3 | 搜索进程 | |
| \ | F4 | 增量进程过滤器 | |
| t | F5 | 显示树形结构 | |
| <,> | F6 | 选择排序方式 |  |
| [ | F7 | 可减少 nice 值可以提高对应进程的优先级 | |
| ] | F8 | 可增加 nice 值，降低对应进程的优先级 | |
| k | F9 | 可对进程传递信号 | |
| q | F10 | 结束 htop | |
| u | | 只显示一个给定的用户的过程 |
| U |  |取消标记所有的进程 |
| H |  |显示或隐藏用户线程 |
| K |  |显示或隐藏内核线程 |
| F |  |跟踪进程 |
| P |  |按 CPU 使用排序 |
| M | | 按内存使用排序 |
| T | | 按 Time+ 使用排序 |
| L |  |显示进程打开的文件 |
| I |  |倒转排序顺序 |
| s |  |选择某进程，按 s: 用 strace 追踪进程的系统调用 |





